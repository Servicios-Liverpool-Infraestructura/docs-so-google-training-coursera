
<!DOCTYPE html>
<html lang='en'>
<head>
<title>Configuring Pod Autoscaling and NodePools | Qwiklabs</title>
<script>
//<![CDATA[
window.gon={};gon.current_user={"firstname":"DANIEL","lastname":"ENRIQUE SANDOVAL SANCHEZ","fullname":"DANIEL ENRIQUE SANDOVAL SANCHEZ","company":"Coursera","email":"desandovals@liverpool.com.mx","origin":"googlecoursera-run, lti-coursera","subscriptions":0,"id":"40414ff5fc280f833d9acca966912f93","qlCreatedAt":"2020-11-17 20:45:59 UTC","optIn":null,"current_organization_id":null,"current_organization_role":null};gon.segment="j4Im8pqIko0Lxq4wVVZWMPMM0EroHUvb";gon.deployment="googlecoursera-run";gon.content={"type":"Lab","id":2300,"name":"Configuring Pod Autoscaling and NodePools"};
//]]>
</script>
<script>
  dataLayer = [
    {user: gon.current_user},
    {content: gon.content}
  ];
</script>
<script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer',"GTM-TQR88QK");
</script>
<script>
  EVENT_SOURCE_BASE_URL = "https://googlecoursera-run.qwiklabs.com/nchan-sub?id=";
</script>
<script src="https://cdn.qwiklabs.com/assets/hallofmirrors/polyfills/webcomponents-loader-408088dc333247a761de5f2b2a4ba1cabd2bc36579f83ba92a559eb3682a9b77.js"></script>
<script src="https://cdn.qwiklabs.com/assets/vendor-45d462772c30000424907184f70c7157e95fb6227698d1671c5051818a6f60d8.js"></script>
<script src="https://cdn.qwiklabs.com/assets/application-6874b164d8346f46605fc772a6f7375a39626ffc9f6d168e23a3a8c40bb6fd28.js"></script>
<script src="https://cdn.qwiklabs.com/assets/hallofmirrors/hallofmirrors-b7ff781d00ceebdf75589f58475cea695bafd8d5cc1f3eb4baf6122ed4a4b736.js"></script>
<!--[if lt IE 9]>
<script src='http://html5shim.googlecode.com/svn/trunk/html5.js' type='text/javascript'></script>
<![endif]-->
<!--[endif]>  <![endif]-->
<script type='application/ld+json'>
{
  "@context": "http://schema.org",
  "@type": "WebSite",
  "url": "https://www.qwiklabs.com/",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://www.qwiklabs.com/catalog?keywords={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>
<script id='ze-snippet' src='https://static.zdassets.com/ekr/snippet.js?key=511e4158-0aec-4e3c-b2e6-4daa1769f51e'></script>


<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="i3wmZMFqcoHDHB0IcEktz6/nkCu9R+tmhNBkm+Wx/U5brWlM3ajzJXDtvkXURQWy+m7eY9WamNEeo1ABDx2fyg==" />
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=0' name='viewport'>
<meta content='1rRsY0INj8RvwB5EF5pwdxt2A2P9aDgAlsICaJ0d5w0' name='google-site-verification'>
<meta content='#3681E4' property='msapplication-TileColor'>
<meta content='/favicon-144.png' property='msapplication-TileImage'>
<meta content='[{&quot;id&quot;:&quot;recaptcha_experiment&quot;,&quot;optimize_id&quot;:&quot;dpViOcLkT3qS4TvL2mRojA&quot;,&quot;title&quot;:&quot;No Recaptcha shown for trusted users&quot;,&quot;variant_index&quot;:0,&quot;variant&quot;:&quot;original&quot;}]' name='active-experiments'>
<meta content='{&quot;userId&quot;:3894861}' name='help-api-product-data'>
<meta content='Architecting with Google Kubernetes Engine: Configuring Pod Autoscaling and NodePools' name='description'>
<meta content='Qwiklabs' name='author'>
<meta content='Configuring Pod Autoscaling and NodePools | Qwiklabs' property='og:title'>
<meta content='website' property='og:type'>
<meta content='/favicon-144.png' property='og:image'>
<meta content='Qwiklabs' property='og:site_name'>
<meta content='Architecting with Google Kubernetes Engine: Configuring Pod Autoscaling and NodePools' property='og:description'>
<meta content='/qwiklabs_logo_900x887.png' property='og:logo' size='900x887'>
<meta content='/qwiklabs_logo_994x187.png' property='og:logo' size='994x187'>


<link href='/favicon-32.png' rel='shortcut icon'>
<link color='#3681E4' href='/favicon-svg.svg' rel='mask-icon'>
<link href='/favicon-180.png' rel='apple-touch-icon-precomposed'>



<link rel="stylesheet" media="screen" href="https://fonts.googleapis.com/css?family=Oswald:400|Roboto+Mono:400,700|Roboto:300,400,500,700|Google+Sans:300,400,500,700|Google+Sans+Display:400|Material+Icons|Google+Material+Icons" />


<link rel="stylesheet" media="all" href="https://cdn.qwiklabs.com/assets/application-cf67fd00dd904ecce1e24779d7504aefc7fbd5d00696246fa80212743a81bf07.css" />



</head>
<body class='lab-show l-full no-nav application-new focuses focuses-show lab-show l-full no-nav '>
<noscript>
<iframe height='0' src='https://www.googletagmanager.com/ns.html?id=GTM-TQR88QK' style='display:none;visibility:hidden;' width='0'></iframe>
</noscript>
<span class='hidden' id='flash-sibling-before'></span>

<div class='header-container'>
<div class='header'>
<ql-icon-button class='js-nav-toggle header__nav-panel-button l-mrm'>menu</ql-icon-button>
<div class='header__title'>
<ql-icon-button label="Back" href="https://www.coursera.org/" id="17abdac3d29148cb" target="_self">arrow_back</ql-icon-button><div class="mdl-tooltip" data-mdl-for="17abdac3d29148cb">Back</div>

<h1 class='headline-5'>
Configuring Pod Autoscaling and NodePools
</h1>
</div>
<div class='header__actions'>
<ql-icon-button class='header__button--search js-header-search-bar-button'>search</ql-icon-button>
<ql-icon-button id='control-panel-target' style='display: none;'>
dashboard
</ql-icon-button>
<ql-menu for='control-panel-target' id='control-panel-menu'></ql-menu>

<ql-icon-button id='help-menu-button'>help</ql-icon-button>
<div class='mdl-tooltip js-tooltip' data-mdl-for='help-menu-button'>
Help
</div>
<ql-menu for='help-menu-button' id='help-menu'>
<ql-menu-item>
<ql-help context='lab' data-analytics-action='opened_help' data-analytics-label='lab' productdata='{&quot;userId&quot;:3894861}'>
Help Center
</ql-help>
</ql-menu-item>
<ql-menu-item>
<a target="_blank" class="ql-body-1" href="https://support.google.com/qwiklabs/contact/contact_us">Email support</a>
</ql-menu-item>
<ql-menu-item>
<a class='ql-body-1' onClick='ql.chat.open()'>Chat support</a>
</ql-menu-item>
</ql-menu>

<ql-icon-button id='language'>language</ql-icon-button>
<div class='mdl-menu mdl-menu__bottom-right mdl-js-menu elevation-3' for='language'>
<a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="ar" href="/focuses/15531470?locale=ar&amp;parent=lti_session">العربية‬‎
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="de" href="/focuses/15531470?locale=de&amp;parent=lti_session">Deutsch
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="en" href="/focuses/15531470?locale=en&amp;parent=lti_session">English
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="es" href="/focuses/15531470?locale=es&amp;parent=lti_session">español (Latinoamérica)
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="fr" href="/focuses/15531470?locale=fr&amp;parent=lti_session">français
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="id" href="/focuses/15531470?locale=id&amp;parent=lti_session">bahasa Indonesia
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="it" href="/focuses/15531470?locale=it&amp;parent=lti_session">Italiano
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="ja" href="/focuses/15531470?locale=ja&amp;parent=lti_session">日本語
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="ko" href="/focuses/15531470?locale=ko&amp;parent=lti_session">한국어
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="pl" href="/focuses/15531470?locale=pl&amp;parent=lti_session">Polski
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="pt_BR" href="/focuses/15531470?locale=pt_BR&amp;parent=lti_session">português (Brasil)
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="pt_PT" href="/focuses/15531470?locale=pt_PT&amp;parent=lti_session">português (Portugal)
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="ru" href="/focuses/15531470?locale=ru&amp;parent=lti_session">русский
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="tr" href="/focuses/15531470?locale=tr&amp;parent=lti_session">Türkçe
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="zh" href="/focuses/15531470?locale=zh&amp;parent=lti_session">简体中文
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="zh_TW" href="/focuses/15531470?locale=zh_TW&amp;parent=lti_session">繁體中文
</a></div>
<button class='icon-button' id='my_account'>
<ql-avatar></ql-avatar>
</button>
<ql-menu for='my_account' open>
<div class='my-account-menu'>
<ql-avatar class='l-mtl l-mbl' size='120'></ql-avatar>
<div class='my-account-menu__user-info l-mbl'>
<h4 class='ql-subhead-1'>DANIEL ENRIQUE SANDOVAL SANCHEZ</h4>
<p class='ql-body-2 text--light'>desandovals@liverpool.com.mx</p>
<p class='ql-body-2 text--light'>
</p>
<a class="text--green ql-subhead-2" href="/my_account/payments"><ql-chip positive>
0 Credits
</ql-chip>
</a></div>
<div class='buttons l-mbl'>
<a class="button button--hairline" id="settings" href="/my_account/profile">Settings</a>
</div>
<hr>
<ql-button data-analytics-action='clicked_sign_out' href='/users/sign_out' method='delete'>
Sign Out
</ql-button>
<div class='privacy l-mtl'>
<a class="ql-caption text--light" href="/privacy_policy">Privacy</a>
<span class='ql-caption text--light l-mls l-mrs'>&middot;</span>
<a class="ql-caption text--light" href="/terms_of_service">Terms</a>
</div>
</div>
</ql-menu>

</div>
</div>
<div class='header__search-bar js-header-search-bar'>
<form class="js-search-form-mobile" onsubmit="ql.searchFilter(); return false;" action="/searches/elasticsearch" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="u5XSWXrxmQoSOJtq2wx6Dt/uA+z8uwnSvSz5uUxVg5drRJ1xZjMYrqHJOCd/AFJzimdNpJRmemUnX80jpvnhEw==" />
<input type="text" name="keywords" id="keywords" placeholder="Search" maxlength="255" aria-label="catalog search bar" />
</form>

<ql-icon-button class='js-close-search-bar'>close</ql-icon-button>
</div>
</div>

<nav class='nav-bar'>
<a class="nav-bar__item js-navigation-button" href="/"><ql-icon class='nav-bar__item__icon'>
home
</ql-icon>
<span class='nav-bar__item__label'>
Home
</span>
</a>
<a class="nav-bar__item js-navigation-button" href="/catalog"><ql-icon class='nav-bar__item__icon'>
school
</ql-icon>
<span class='nav-bar__item__label'>
Catalog
</span>
</a>
<a class="nav-bar__item js-navigation-button" href="/my_learning"><ql-icon class='nav-bar__item__icon'>
event_note
</ql-icon>
<span class='nav-bar__item__label'>
My Learning
</span>
</a>
</nav>

<nav class='nav-panel js-nav-panel'>
<div class='nav-panel__logo'>
<div class='logo logo--blue'></div>
</div>
<a title="Home" tabindex="-1" class="nav-panel__item js-navigation-button" href="/"><ql-icon class='nav-panel__item__icon'>
home
</ql-icon>
<div class='nav-panel__item__label'>
Home
</div>
</a>
<a title="Catalog" tabindex="-1" class="nav-panel__item js-navigation-button" href="/catalog"><ql-icon class='nav-panel__item__icon'>
school
</ql-icon>
<div class='nav-panel__item__label'>
Catalog
</div>
</a>
<a title="My Learning" tabindex="-1" class="nav-panel__item js-navigation-button" href="/my_learning"><ql-icon class='nav-panel__item__icon'>
event_note
</ql-icon>
<div class='nav-panel__item__label'>
My Learning
</div>
</a>
<div class='nav-panel__spacer'></div>
<a title="Profile" tabindex="-1" class="nav-panel__item js-navigation-button" href="/my_account/profile"><ql-icon class='nav-panel__item__icon'>
account_circle
</ql-icon>
<div class='nav-panel__item__label'>
Profile
</div>
</a>
<a title="Credits &amp; Subscriptions" tabindex="-1" class="nav-panel__item js-navigation-button" href="/my_account/credits"><ql-icon class='nav-panel__item__icon'>
money
</ql-icon>
<div class='nav-panel__item__label'>
Credits &amp; Subscriptions
</div>
</a>
<a title="Security" tabindex="-1" class="nav-panel__item js-navigation-button" href="/my_account/security"><ql-icon class='nav-panel__item__icon'>
security
</ql-icon>
<div class='nav-panel__item__label'>
Security
</div>
</a>
<div class='nav-panel__spacer'></div>
<a class="nav-panel__item" tabindex="-1" href="#"><ql-help>
<div class='nav-panel__help-item'>
<ql-icon class='nav-panel__item__icon'>help</ql-icon>
<div class='nav-panel__item__label'>
Help
</div>
</div>
</ql-help>
</a><div class='nav-panel__small-links'>
<a tabindex="-1" href="/privacy_policy">Privacy</a>
<a tabindex="-1" href="/terms_of_service">Terms</a>
</div>
</nav>
<div class='nav-panel__overlay js-nav-toggle'></div>

<main class='js-main'>
<div class='l-main-wrapper' id='main-wrapper'>







<div class='lab-assessment__tab js-open-lab-assessment-panel'>
<h6 class='js-lab-assessment-total-score'>
&mdash;/15
</h6>
</div>
<div class='lab-assessment__panel js-lab-assessment-panel'>
<div class='lab-assessment__panel__header'>
<h4>Checkpoints</h4>
<ql-icon-button class='js-close-lab-assessment-panel'>arrow_forward</ql-icon-button>
</div>
<div class='lab-assessment__step'>
<p class='lab-assessment__step__title'>
Deploy a sample web application to GKE cluster
</p>
<div class='lab-assessment__step__action'>
<a class='button js-show-run-step-button' step_no='1'>
Check my progress
</a>
<p class='lab-assessment__step__score'>
<span class='js-assessment-step-score-1'>
</span>
/ 5
</p>
</div>
</div>

<div class='lab-assessment__step'>
<p class='lab-assessment__step__title'>
Deploying the loadgen application
</p>
<div class='lab-assessment__step__action'>
<a class='button js-show-run-step-button' step_no='2'>
Check my progress
</a>
<p class='lab-assessment__step__score'>
<span class='js-assessment-step-score-2'>
</span>
/ 5
</p>
</div>
</div>

<div class='lab-assessment__step'>
<p class='lab-assessment__step__title'>
Manage node pools
</p>
<div class='lab-assessment__step__action'>
<a class='button js-show-run-step-button' step_no='3'>
Check my progress
</a>
<p class='lab-assessment__step__score'>
<span class='js-assessment-step-score-3'>
</span>
/ 5
</p>
</div>
</div>

</div>
<ql-drawer-container class='js-lab-state' data-analytics-payload='{&quot;label&quot;:&quot;Configuring Pod Autoscaling and NodePools&quot;,&quot;lab_name&quot;:&quot;Configuring Pod Autoscaling and NodePools&quot;,&quot;classroom_name&quot;:null,&quot;deployment&quot;:&quot;googlecoursera-run&quot;}' data-focus-id='15531470' data-lab-billing-limit='0.0' data-lab-duration='3600' data-parent='lti_session' data-recaptcha-enabled id='lab-container'>
<ql-drawer id='terminal-drawer' slot='drawer' style='width: calc(100% - 480px)'>
<iframe allow='clipboard-read' class='terminal' id='embedded-resource'></iframe>
</ql-drawer>
<ql-drawer-content class='js-lab-wrapper' id='lab-content' slot='drawer-content'>
<ql-drawer-container id='lab-content-container'>
<ql-drawer id='control-panel-drawer' open slot='drawer' width='320'>
<ql-lab-control-panel class='ql-lab-control-panel__max-height control-panel js-lab-control-panel' connectionFiles='[]' labControlButton='{&quot;disabled&quot;:false,&quot;pending&quot;:false,&quot;running&quot;:false}' labDetails='[]' labTimer='{&quot;ticking&quot;:false,&quot;secondsRemaining&quot;:3600}' studentResources='[]'>
<script src="https://www.recaptcha.net/recaptcha/api.js?render=6LeVI8IUAAAAAJNdox5eTkYrw9SbvhZ1TFyv3iHr"   ></script>
        <script>
          // Define function so that we can call it again later if we need to reset it
          // This executes reCAPTCHA and then calls our callback.
          function executeRecaptchaForStartLab() {
            grecaptcha.ready(function() {
              grecaptcha.execute('6LeVI8IUAAAAAJNdox5eTkYrw9SbvhZ1TFyv3iHr', {action: 'start_lab'}).then(function(token) {
                setInputWithRecaptchaResponseTokenForStartLab('g-recaptcha-response-data-start-lab', token)
              });
            });
          };
          // Invoke immediately
          executeRecaptchaForStartLab()

          // Async variant so you can await this function from another async function (no need for
          // an explicit callback function then!)
          // Returns a Promise that resolves with the response token.
          async function executeRecaptchaForStartLabAsync() {
            return new Promise((resolve, reject) => {
              grecaptcha.ready(async function() {
                resolve(await grecaptcha.execute('6LeVI8IUAAAAAJNdox5eTkYrw9SbvhZ1TFyv3iHr', {action: 'start_lab'}))
              });
            })
          };

                    var setInputWithRecaptchaResponseTokenForStartLab = function(id, token) {
            var element = document.getElementById(id);
            element.value = token;
          }

        </script>
<input type="hidden" name="g-recaptcha-response-data[start_lab]" id="g-recaptcha-response-data-start-lab" data-sitekey="6LeVI8IUAAAAAJNdox5eTkYrw9SbvhZ1TFyv3iHr" class="g-recaptcha g-recaptcha-response "/>

<div class='hidden' id='recaptcha-v2-start-lab' slot='recaptcha'>
<script src="https://www.recaptcha.net/recaptcha/api.js" async defer ></script>
<div data-sitekey="6LeOI8IUAAAAAPkHlMAE9NReCD_1WD81iYlBlCnV" data-callback="recaptchaComplete" data-expired-callback="expireV2Token" class="g-recaptcha "></div>
          <noscript>
            <div>
              <div style="width: 302px; height: 422px; position: relative;">
                <div style="width: 302px; height: 422px; position: absolute;">
                  <iframe
                    src="https://www.recaptcha.net/recaptcha/api/fallback?k=6LeOI8IUAAAAAPkHlMAE9NReCD_1WD81iYlBlCnV"
                    name="ReCAPTCHA"
                    style="width: 302px; height: 422px; border-style: none; border: 0; overflow: hidden;">
                  </iframe>
                </div>
              </div>
              <div style="width: 300px; height: 60px; border-style: none;
                bottom: 12px; left: 25px; margin: 0px; padding: 0px; right: 25px;
                background: #f9f9f9; border: 1px solid #c1c1c1; border-radius: 3px;">
                <textarea id="g-recaptcha-response" name="g-recaptcha-response"
                  class="g-recaptcha-response"
                  style="width: 250px; height: 40px; border: 1px solid #c1c1c1;
                  margin: 10px 25px; padding: 0px; resize: none;">
                </textarea>
              </div>
            </div>
          </noscript>

</div>
</ql-lab-control-panel>
</ql-drawer>
<ql-drawer-content id='lab-instructions' slot='drawer-content'>
<div class='alert alert--fake js-alert'>
<p class='alert__message js-alert-message'></p>
<a class='alert__close js-alert-close'>
<i class='fa fa-times'></i>
</a>
<iframe class='l-ie-iframe-fix'></iframe>
</div>
<div class='js-lab-content lab-content__renderable-instructions'>
<div class='lab-preamble'>
<h1 class='lab-preamble__title'>
Configuring Pod Autoscaling and NodePools
</h1>
<div class='lab-preamble__details subtitle-headline-1'>
<span>1 hour </span>
<span>Free</span>
<div class='lab__rating'>
<a href="/focuses/15531470/reviews?parent=lti_session"><div class='rateit' data-rateit-readonly='true' data-rateit-value='4.2774'></div>

</a></div>
</div>
</div>

<div class='js-markdown-instructions markdown-lab-instructions' id='markdown-lab-instructions'>



<h2 id="step1">Overview</h2>
<p>In this lab, you set up an application in Google Kubernetes Engine (GKE), and then use a HorizontalPodAutoscaler to autoscale the web application. You then work with multiple node pools of different types, and you apply taints and tolerations to control the scheduling of Pods with respect to the underlying node pool.</p>
<h2 id="step2">Objectives</h2>
<p>In this lab, you learn how to perform the following tasks:</p>
<ul>
<li>
<p>Configure autoscaling and HorizontalPodAutoscaler</p>
</li>
<li>
<p>Add a node pool and configure taints on the nodes for Pod anti-affinity</p>
</li>
<li>
<p>Configure an exception for the node taint by adding a toleration to a Pod's manifest</p>
</li>
</ul>
<h2 id="step3">Task 0. Lab Setup</h2>
<h3>Access Qwiklabs</h3>
<p>For each lab, you get a new GCP project and set of resources for a fixed time at no cost.</p>
<ol>
<li>
<p>Make sure you signed into Qwiklabs using an <strong>incognito window</strong>.</p>
</li>
<li>
<p>Note the lab's access time (for example, <img alt="img/time.png" src="https://cdn.qwiklabs.com/aZQJ4BT7uCmM9XR6BTXgTRP1Hfu1T7q6V%2BcnbdEsbpU%3D"> and make sure you can finish in that time block.</p>
</li>
</ol>
<aside> <p>
  There is no pause feature. You can restart if needed, but you have to start at the beginning.
  </p>

</aside>
<ol start="3">
<li>
<p>When ready, click <img alt="img/start_lab.png" src="https://cdn.qwiklabs.com/XE8x7uvQokyubNwnYKKc%2BvBBNrMlo5iNZiDDzQQ3Ddo%3D">.</p>
</li>
<li>
<p>Note your lab credentials. You will use them to sign in to Cloud Platform Console.
<img alt="img/open_google_console.png" src="https://cdn.qwiklabs.com/0d78dhX6IVMVWmixCPPSBbmi5O2GPokCXf1Ps1AkTgI%3D"></p>
</li>
<li>
<p>Click <strong>Open Google Console</strong>.</p>
</li>
<li>
<p>Click <strong>Use another account</strong> and copy/paste credentials for <strong>this</strong> lab into the prompts.</p>
</li>
</ol>
<aside class="warning"><p>
  If you use other credentials, you'll get errors or <strong>incur charges</strong>.
  </p>
</aside>
<ol start="7">
<li>Accept the terms and skip the recovery resource page.</li>
</ol>
<aside class="warning"><p>
  Do not click <strong>End Lab</strong> unless you are finished with the lab or want to restart it. This clears your work and removes the project.
  </p>
</aside>

<p>After you complete the initial sign-in steps, the project dashboard appears.</p>
<h3>Activate Google Cloud Shell</h3>
<p>Google Cloud Shell is a virtual machine that is loaded with development tools. It offers a persistent 5GB home directory and runs on the Google Cloud.
Google Cloud Shell provides command-line access to your GCP resources.</p>
<ol>
<li>
<p>In GCP console, on the top right toolbar, click the Open Cloud Shell button.</p>
<p><img alt="Cloud Shell icon" src="https://cdn.qwiklabs.com/vdY5e%2Fan9ZGXw5a%2FZMb1agpXhRGozsOadHURcR8thAQ%3D"></p>
</li>
<li>
<p>Click <strong>Continue</strong>.
<img alt="cloudshell_continue.png" src="https://cdn.qwiklabs.com/lr3PBRjWIrJ%2BMQnE8kCkOnRQQVgJnWSg4UWk16f0s%2FA%3D"></p>
</li>
</ol>
<p>It takes a few moments to provision and connect to the environment. When you are connected, you are already authenticated, and the project is set to your <em>PROJECT_ID</em>. For example:</p>
<p><img alt="Cloud Shell Terminal" src="https://cdn.qwiklabs.com/hmMK0W41Txk%2B20bQyuDP9g60vCdBajIS%2B52iI2f4bYk%3D"></p>
<p><strong>gcloud</strong> is the command-line tool for Google Cloud Platform. It comes pre-installed on Cloud Shell and supports tab-completion.</p>
<p>You can list the active account name with this command:</p>
<pre><code>gcloud auth list&#x000A;</code></pre>
<p>Output:</p>
<pre><code class="language-output prettyprint">Credentialed accounts:&#x000A; - &lt;myaccount&gt;@&lt;mydomain&gt;.com (active)&#x000A;</code></pre>
<p>Example output:</p>
<pre><code class="language-Output prettyprint">Credentialed accounts:&#x000A; - google1623327_student@qwiklabs.net&#x000A;</code></pre>
<p>You can list the project ID with this command:</p>
<pre><code>gcloud config list project&#x000A;</code></pre>
<p>Output:</p>
<pre><code class="language-output prettyprint">[core]&#x000A;project = &lt;project_ID&gt;&#x000A;</code></pre>
<p>Example output:</p>
<pre><code class="language-Output prettyprint">[core]&#x000A;project = qwiklabs-gcp-44776a13dea667a6&#x000A;</code></pre>
<ql-infobox>
  Full documentation of <strong>gcloud</strong> is available on
  <a href="https://cloud.google.com/sdk/gcloud" target="_blank">
    Google Cloud gcloud Overview
  </a>.
</ql-infobox>

<h2 id="step4">Task 1. Connect to the lab GKE cluster and deploy a sample workload</h2>
<p>In this task, you connect to the lab GKE cluster and create a deployment manifest for a set of Pods within the cluster.</p>
<h3>Connect to the lab GKE cluster</h3>
<ol>
<li>
<p>In Cloud Shell, type the following command to set the environment variable for the zone and cluster name.</p>
</li>
</ol>
<pre><code>export my_zone=us-central1-a&#x000A;export my_cluster=standard-cluster-1&#x000A;</code></pre>
<ol start="2">
<li>
<p>Configure tab completion for the kubectl command-line tool.</p>
</li>
</ol>
<pre><code>source &lt;(kubectl completion bash)&#x000A;</code></pre>
<ol start="3">
<li>
<p>Configure access to your cluster for kubectl:</p>
</li>
</ol>
<pre><code>gcloud container clusters get-credentials $my_cluster --zone $my_zone&#x000A;</code></pre>
<h3>Deploy a sample web application to your GKE cluster</h3>
<p>You will deploy a sample application to your cluster using the <code>web.yaml</code> deployment file that has been created for you:</p>
<pre><code>apiVersion: apps/v1&#x000A;kind: Deployment&#x000A;metadata:&#x000A;  name: web&#x000A;spec:&#x000A;  replicas: 1&#x000A;  selector:&#x000A;    matchLabels:&#x000A;      run: web&#x000A;  template:&#x000A;    metadata:&#x000A;      labels:&#x000A;        run: web&#x000A;    spec:&#x000A;      containers:&#x000A;      - image: gcr.io/google-samples/hello-app:1.0&#x000A;        name: web&#x000A;        ports:&#x000A;        - containerPort: 8080&#x000A;          protocol: TCP  &#x000A;        resources:&#x000A;          # You must specify requests for CPU to autoscale&#x000A;          # based on CPU utilization&#x000A;          requests:&#x000A;            cpu: "250m"&#x000A;</code></pre>
<p>This manifest creates a deployment using a sample web application container image that listens on an HTTP server on port 8080.</p>
<ol>
<li>
<p>In Cloud Shell enter the following command  to clone the repository to the lab Cloud Shell.</p>
</li>
</ol>
<pre><code>git clone https://github.com/GoogleCloudPlatform/training-data-analyst&#x000A;</code></pre>
<ol start="2">
<li>
<p>Create a soft link as a shortcut to the working directory.</p>
</li>
</ol>
<pre><code>ln -s ~/training-data-analyst/courses/ak8s/v1.1 ~/ak8s&#x000A;</code></pre>
<ol start="3">
<li>
<p>Change to the directory that contains the sample files for this lab.</p>
</li>
</ol>
<pre><code>cd ~/ak8s/Autoscaling/&#x000A;</code></pre>
<ol start="4">
<li>
<p>To create a deployment from this file, execute the following command:</p>
</li>
</ol>
<pre><code>kubectl create -f web.yaml --save-config&#x000A;</code></pre>
<ol start="5">
<li>
<p>Create a service resource of type NodePort on port 8080 for the web deployment.</p>
</li>
</ol>
<pre><code>kubectl expose deployment web --target-port=8080 --type=NodePort&#x000A;</code></pre>
<ol start="6">
<li>
<p>Verify that the service was created and that a node port was allocated:</p>
</li>
</ol>
<pre><code>kubectl get service web&#x000A;</code></pre>
<p>Your IP address and port number might be different from the example output.</p>
<p><strong>Output (do not copy)</strong></p>
<pre><code>NAME      TYPE       CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE&#x000A;web       NodePort   10.11.246.185   &lt;none&gt;        8080:32056/TCP   12s&#x000A;</code></pre>
<p>Click <em>Check my progress</em> to verify the objective.
<ql-activity-tracking step="1">
Deploy a sample web application to GKE cluster
</ql-activity-tracking></p>
<h2 id="step5">Task 2. Configure autoscaling on the cluster</h2>
<p>In this task, you configure the cluster to automatically scale the sample application that you deployed earlier.</p>
<h3>Configure autoscaling</h3>
<ol>
<li>
<p>Get the list of deployments to determine whether your sample web application is still running.</p>
</li>
</ol>
<pre><code>kubectl get deployment&#x000A;</code></pre>
<p>The output should look like the example.</p>
<p><strong>Output (do not copy)</strong></p>
<pre><code>NAME   READY   UP-TO-DATE   AVAILABLE   AGE&#x000A;web    1/1     1            1           5m48s&#x000A;</code></pre>
<p>If the web deployment of your application is not displayed, return to task 1 and redeploy it to the cluster.</p>
<ol start="2">
<li>
<p>To configure your sample application for autoscaling (and to set the maximum number of replicas to four and the minimum to one, with a CPU utilization target of 1%), execute the following command:</p>
</li>
</ol>
<pre><code>kubectl autoscale deployment web --max 4 --min 1 --cpu-percent 1&#x000A;</code></pre>
<p>When you use <code>kubectl autoscale</code>, you specify a maximum and minimum number of replicas for your application, as well as a CPU utilization target.</p>
<ol start="3">
<li>
<p>Get the list of deployments to verify that there is still only one deployment of the web application.</p>
</li>
</ol>
<pre><code>kubectl get deployment&#x000A;</code></pre>
<p><strong>Output (do not copy)</strong></p>
<pre><code>NAME   READY   UP-TO-DATE   AVAILABLE   AGE&#x000A;web    1/1     1            1           8m21s&#x000A;</code></pre>
<h3>Inspect the HorizontalPodAutoscaler object</h3>
<p>The <code>kubectl autoscale</code> command you used in the previous task creates a <code>HorizontalPodAutoscaler</code> object that targets a specified resource, called the scale target, and scales it as needed. The autoscaler periodically adjusts the number of replicas of the scale target to match the average CPU utilization that you specify when creating the autoscaler.</p>
<ol>
<li>
<p>To get the list of HorizontalPodAutoscaler resources, execute the following command:</p>
</li>
</ol>
<pre><code>kubectl get hpa&#x000A;</code></pre>
<p>The output should look like the example.</p>
<p><strong>Output (do not copy)</strong></p>
<pre><code>NAME      REFERENCE        TARGETS   MINPODS   MAXPODS   REPLICAS   AGE&#x000A;web       Deployment/web   0%/1%     1         4         1          1m&#x000A;</code></pre>
<ol start="2">
<li>
<p>To inspect the configuration of <code>HorizontalPodAutoscaler</code> in table form, execute the following command:</p>
</li>
</ol>
<pre><code>kubectl describe horizontalpodautoscaler web&#x000A;</code></pre>
<p>The output should look like the example.</p>
<p><strong>Output (do not copy)</strong></p>
<pre><code>Name:                                                  web&#x000A;Namespace:                                             default&#x000A;Labels:                                                &lt;none&gt;&#x000A;Annotations:                                           &lt;none&gt;&#x000A;CreationTimestamp:                                     Tue, 08 Sep 2020...&#x000A;Reference:                                             Deployment/web&#x000A;Metrics:                                               ( current / target )&#x000A;  resource cpu on pods  (as a percentage of request):  0% (0) / 1%&#x000A;Min replicas:                                          1&#x000A;Max replicas:                                          4&#x000A;Deployment pods:                                       1 current / 1 desired&#x000A;Conditions:&#x000A;  Type            Status  Reason               Message&#x000A;  ----            ------  ------               -------&#x000A;  AbleToScale     True    ScaleDownStabilized  recent recommendations [...]&#x000A;  ScalingActive   True    ValidMetricFound     the HPA was able to [...]&#x000A;  ScalingLimited  False   DesiredWithinRange   the desired count [...]&#x000A;Events:           &lt;none&gt;&#x000A;</code></pre>
<ol start="3">
<li>
<p>To view the configuration of HorizontalPodAutoscaler in YAML form, execute the following command:</p>
</li>
</ol>
<pre><code>kubectl get horizontalpodautoscaler web -o yaml&#x000A;</code></pre>
<p>The output should look like the example.</p>
<p><strong>Output (do not copy)</strong></p>
<pre><code>apiVersion: autoscaling/v1&#x000A;kind: HorizontalPodAutoscaler&#x000A;metadata:&#x000A;  annotations:&#x000A;    autoscaling.alpha.kubernetes.io/conditions:  [...]   autoscaling.alpha.kubernetes.io/current-metrics: [...]&#x000A;  creationTimestamp: 2018-11-14T02:59:28Z&#x000A;  name: web&#x000A;  namespace: default&#x000A;  resourceVersion: "14588"&#x000A;  selfLink: /apis/autoscaling/v1/namespaces/[...]&#x000A;spec:&#x000A;  maxReplicas: 4&#x000A;  minReplicas: 1&#x000A;  scaleTargetRef:&#x000A;    apiVersion: apps/v1&#x000A;    kind: Deployment&#x000A;    name: web&#x000A;  targetCPUUtilizationPercentage: 1&#x000A;status:&#x000A;  currentCPUUtilizationPercentage: 0&#x000A;  currentReplicas: 1&#x000A;  desiredReplicas: 1&#x000A;</code></pre>
<h3>Test the autoscale configuration</h3>
<p>You need to create a heavy load on the web application to force it to scale out. You create a configuration file that defines a deployment of four containers that run an infinite loop of HTTP queries against the sample application web server.</p>
<p>You create the load on your web application by deploying the loadgen application using the <code>loadgen.yam</code>l file that has been provided for you.</p>
<pre><code>apiVersion: apps/v1&#x000A;kind: Deployment&#x000A;metadata:&#x000A;  name: loadgen&#x000A;spec:&#x000A;  replicas: 4&#x000A;  selector:&#x000A;    matchLabels:&#x000A;      app: loadgen&#x000A;  template:&#x000A;    metadata:&#x000A;      labels:&#x000A;        app: loadgen&#x000A;    spec:&#x000A;      containers:&#x000A;      - name: loadgen&#x000A;        image: k8s.gcr.io/busybox&#x000A;        args:&#x000A;        - /bin/sh&#x000A;        - -c&#x000A;        - while true; do wget -q -O- http://web:8080; done&#x000A;</code></pre>
<ol>
<li>
<p>To deploy this container, execute the following command:</p>
</li>
</ol>
<pre><code>kubectl apply -f loadgen.yaml&#x000A;</code></pre>
<p>After you deploy this manifest, the web Pod should begin to scale.</p>
<p>Click <em>Check my progress</em> to verify the objective.
<ql-activity-tracking step="2">
Deploying the loadgen application
</ql-activity-tracking></p>
<ol start="2">
<li>
<p>Get the list of deployments to verify that the load generator is running.</p>
</li>
</ol>
<pre><code>kubectl get deployment&#x000A;</code></pre>
<p>The output should look like the example.</p>
<p><strong>Output (do not copy)</strong></p>
<pre><code>NAME      READY   UP-TO-DATE   AVAILABLE   AGE&#x000A;loadgen   4/4     4            4           26s&#x000A;web       1/1     1            1           14m&#x000A;</code></pre>
<ol start="3">
<li>
<p>Inspect HorizontalPodAutoscaler.</p>
</li>
</ol>
<pre><code>kubectl get hpa&#x000A;</code></pre>
<p>Once the loadgen Pod starts to generate traffic, the web deployment CPU utilization begins to increase. In the example output, the targets are now at 35% CPU utilization compared to the 1% CPU threshold.</p>
<p><strong>Output (do not copy)</strong></p>
<pre><code>NAME      REFERENCE        TARGETS   MINPODS   MAXPODS   REPLICAS   AGE&#x000A;web       Deployment/web   35%/1%    1         4         1          8m&#x000A;</code></pre>
<ol start="4">
<li>
<p>After a few minutes, inspect the HorizontalPodAutoscaler again.</p>
</li>
</ol>
<pre><code>kubectl get hpa&#x000A;</code></pre>
<p>The autoscaler has increased the web deployment to four replicas.</p>
<p><strong>Output (do not copy)</strong></p>
<pre><code>NAME      REFERENCE        TARGETS   MINPODS   MAXPODS   REPLICAS   AGE&#x000A;web       Deployment/web   88%/1%   1         4         4          9m&#x000A;</code></pre>
<ol start="5">
<li>
<p>To stop the load on the web application, scale the loadgen deployment to zero replicas.</p>
</li>
</ol>
<pre><code>kubectl scale deployment loadgen --replicas 0&#x000A;</code></pre>
<ol start="6">
<li>
<p>Get the list of deployments to verify that loadgen has scaled down.</p>
</li>
</ol>
<pre><code>kubectl get deployment&#x000A;</code></pre>
<p>The loadgen deployment should have zero replicas.</p>
<p><strong>Output (do not copy)</strong></p>
<pre><code>NAME      READY   UP-TO-DATE   AVAILABLE   AGE&#x000A;loadgen   0/0     0            0           3m40s&#x000A;web       2/4     4            2           18m&#x000A;web       2/4     4            2           18m&#x000A;</code></pre>
<ql-infobox><strong>Note:</strong> You need to wait 2 to 3 minutes before you list the deployments again.</ql-infobox>
<ol start="7">
<li>
<p>Get the list of deployments to verify that the web application has scaled down to the minimum value of 1 replica that you configured when you deployed the autoscaler.</p>
</li>
</ol>
<pre><code>kubectl get deployment&#x000A;</code></pre>
<p>You should now have one deployment of the web application.</p>
<p><strong>Output (do not copy)</strong></p>
<pre><code>NAME      READY   UP-TO-DATE   AVAILABLE   AGE&#x000A;loadgen   0/0     0            0           6m28s&#x000A;web       4/4     4            4           20m&#x000A;</code></pre>
<h2 id="step6">Task 3. Manage node pools</h2>
<p>In this task, you create a new pool of nodes using preemptible instances, and then you constrain the web deployment to run only on the preemptible nodes.</p>
<h3>Add a node pool</h3>
<ol>
<li>
<p>To deploy a new node pool with three preemptible VM instances, execute the following command:</p>
</li>
</ol>
<pre><code>gcloud container node-pools create "temp-pool-1" \&#x000A;--cluster=$my_cluster --zone=$my_zone \&#x000A;--num-nodes "2" --node-labels=temp=true --preemptible&#x000A;</code></pre>
<p>If you receive an error that no preemptible instances are available you can remove the <code>--preemptible</code> option to proceed with the lab.</p>
<ol start="2">
<li>
<p>Get the list of nodes to verify that the new nodes are ready.</p>
</li>
</ol>
<pre><code>kubectl get nodes&#x000A;</code></pre>
<p>You should now have <code>4</code> nodes.</p>
<p>Your names will be different from the example output.</p>
<p><strong>Output (do not copy)</strong></p>
<pre><code>NAME                                       STATUS   ROLES    AGE   VERSION&#x000A;gke-standard-cluster-1-default-pool...xc   Ready    &lt;none&gt;   33m   v1.15.12-gke.2&#x000A;gke-standard-cluster-1-default-pool...q8   Ready    &lt;none&gt;   33m   v1.15.12-gke.2&#x000A;gke-standard-cluster-1-temp-pool-1-...vj   Ready    &lt;none&gt;   32s   v1.15.12-gke.2&#x000A;gke-standard-cluster-1-temp-pool-1-...xj   Ready    &lt;none&gt;   37s   v1.15.12-gke.2&#x000A;</code></pre>
<p>All the nodes that you added have the <code>temp=true</code> label because you set that label when you created the node-pool. This label makes it easier to locate and configure these nodes.</p>
<ol start="3">
<li>
<p>To list only the nodes with the <code>temp=true</code> label, execute the following command:</p>
</li>
</ol>
<pre><code>kubectl get nodes -l temp=true&#x000A;</code></pre>
<p>You should see only the two nodes that you added.</p>
<p>Your names will be different from the example output.</p>
<p><strong>Output (do not copy)</strong></p>
<pre><code>NAME                                       STATUS   ROLES    AGE     VERSION&#x000A;gke-standard-cluster-1-temp-pool-1-...vj   Ready    &lt;none&gt;   3m26s   v1.15.12-gke.2&#x000A;gke-standard-cluster-1-temp-pool-1-...xj   Ready    &lt;none&gt;   3m31s   v1.15.12-gke.2&#x000A;</code></pre>
<h3>Control scheduling with taints and tolerations</h3>
<p>To prevent the scheduler from running a Pod on the temporary nodes, you add a taint to each of the nodes in the temp pool. Taints are implemented as a key-value pair with an effect (such as NoExecute) that determines whether Pods can run on a certain node. Only nodes that are configured to tolerate the key-value of the taint are scheduled to run on these nodes.</p>
<ol>
<li>To add a taint to each of the newly created nodes, execute the following command.</li>
</ol>
<p>You can use the <code>temp=true</code> label to apply this change across all the new nodes simultaneously.</p>
<pre><code>kubectl taint node -l temp=true nodetype=preemptible:NoExecute&#x000A;</code></pre>
<p>To allow application Pods to execute on these tainted nodes, you must add a tolerations key to the deployment configuration.</p>
<ol start="2">
<li>
<p>Edit the <code>web.yaml</code> file to add the following key in the template's <code>spec</code> section:</p>
</li>
</ol>
<pre><code>tolerations:&#x000A;- key: "nodetype"&#x000A;  operator: Equal&#x000A;  value: "preemptible"&#x000A;</code></pre>
<p>The spec section of the file should look like the example.</p>
<pre><code>...&#x000A;    spec:&#x000A;      tolerations:&#x000A;      - key: "nodetype"&#x000A;        operator: Equal&#x000A;        value: "preemptible"&#x000A;      containers:&#x000A;      - image: gcr.io/google-samples/hello-app:1.0&#x000A;        name: web&#x000A;        ports:&#x000A;        - containerPort: 8080&#x000A;          protocol: TCP&#x000A;        resources:&#x000A;          # You must specify requests for CPU to autoscale&#x000A;          # based on CPU utilization&#x000A;          requests:&#x000A;            cpu: "250m"&#x000A;</code></pre>
<ol start="3">
<li>
<p>To force the web deployment to use the new node-pool add a nodeSelector key  in the template's <code>spec</code> section. This is parallel to the tolerations key you just added.</p>
</li>
</ol>
<pre><code>     nodeSelector:&#x000A;        temp: "true"&#x000A;</code></pre>
<aside class="special"><p><strong>Note: </strong>GKE adds a custom label to each node called <code>cloud.google.com/gke-nodepool</code> that contains the name of the node-pool that the node belongs to. This key can also be used as part of a nodeSelector to ensure Pods are only deployed to suitable nodes. </p>
</aside>
<p>The full web.yaml deployment should now look as follows.</p>
<pre><code>apiVersion: apps/v1&#x000A;kind: Deployment&#x000A;metadata:&#x000A;  name: web&#x000A;spec:&#x000A;  replicas: 1&#x000A;  selector:&#x000A;    matchLabels:&#x000A;      run: web&#x000A;  template:&#x000A;    metadata:&#x000A;      labels:&#x000A;        run: web&#x000A;    spec:&#x000A;      tolerations:&#x000A;      - key: "nodetype"&#x000A;        operator: Equal&#x000A;        value: "preemptible"&#x000A;      nodeSelector:&#x000A;        temp: "true"&#x000A;      containers:&#x000A;      - image: gcr.io/google-samples/hello-app:1.0&#x000A;        name: web&#x000A;        ports:&#x000A;        - containerPort: 8080&#x000A;          protocol: TCP&#x000A;        resources:&#x000A;          # You must specify requests for CPU to autoscale&#x000A;          # based on CPU utilization&#x000A;          requests:&#x000A;            cpu: "250m"&#x000A;</code></pre>
<ol start="4">
<li>
<p>To apply this change, execute the following command:</p>
</li>
</ol>
<pre><code>kubectl apply -f web.yaml&#x000A;</code></pre>
<p>If you have problems editing this file successfully you can use the pre-prepared sample file called <code>web-tolerations.yaml</code> instead.</p>
<p>Click <em>Check my progress</em> to verify the objective.
<ql-activity-tracking step="3">
Manage node pools
</ql-activity-tracking></p>
<ol start="5">
<li>
<p>Get the list of Pods.</p>
</li>
</ol>
<pre><code>kubectl get pods&#x000A;</code></pre>
<p>Your names might be different from the example output.</p>
<p><strong>Output (do not copy)</strong></p>
<pre><code>NAME                   READY     STATUS    RESTARTS   AGE&#x000A;web-7cb566bccd-pkfst   1/1       Running   0          1m&#x000A;</code></pre>
<ol start="6">
<li>
<p>To confirm the change, inspect the running web Pod(s) using the following command</p>
</li>
</ol>
<pre><code>kubectl describe pods -l run=web&#x000A;</code></pre>
<p>A <code>Tolerations</code> section with <code>nodetype=preemptible</code> in the list should appear near the bottom of the (truncated) output.</p>
<p><strong>Output (do not copy)</strong></p>
<pre><code>&lt;SNIP&gt;&#x000A;&#x000A;Node-Selectors:  temp=true&#x000A;Tolerations:     node.kubernetes.io/not-ready:NoExecute op=Exists for 300s&#x000A;                 node.kubernetes.io/unreachable:NoExecute op=Exists for 300s&#x000A;                 nodetype=preemptible&#x000A;Events:&#x000A;&#x000A;&lt;SNIP&gt;&#x000A;</code></pre>
<p>The output confirms that the Pods will tolerate the taint value on the new preemptible nodes, and thus that they can be scheduled to execute on those nodes.</p>
<ol start="7">
<li>
<p>To force the web application to scale out again scale the loadgen deployment back to four replicas.</p>
</li>
</ol>
<pre><code>kubectl scale deployment loadgen --replicas 4&#x000A;</code></pre>
<p>You could scale just the web application directly but using the loadgen app will allow you to see how the different taint,  toleration and nodeSelector settings that apply to the web and loadgen applications affect which nodes they are scheduled on.</p>
<ol start="8">
<li>
<p>Get the list of Pods using the wide output format to show the nodes running the Pods</p>
</li>
</ol>
<pre><code>kubectl get pods -o wide&#x000A;</code></pre>
<p>This shows that the loadgen app is running only on <code>default-pool</code> nodes while the web app is running only the preemptible nodes in <code>temp-pool-1.</code></p>
<p>The taint setting prevents Pods from running on the preemptible nodes so the loadgen application only runs on the default pool. The toleration setting allows the web application to run on the preemptible nodes and the nodeSelector forces the web application Pods to run on those nodes.</p>
<pre><code>NAME        READY STATUS    [...]         NODE&#x000A;Loadgen-x0  1/1   Running   [...]         gke-xx-default-pool-y0&#x000A;loadgen-x1  1/1   Running   [...]         gke-xx-default-pool-y2&#x000A;loadgen-x3  1/1   Running   [...]         gke-xx-default-pool-y3&#x000A;loadgen-x4  1/1   Running   [...]         gke-xx-default-pool-y4&#x000A;web-x1      1/1   Running   [...]         gke-xx-temp-pool-1-z1&#x000A;web-x2      1/1   Running   [...]         gke-xx-temp-pool-1-z2&#x000A;web-x3      1/1   Running   [...]         gke-xx-temp-pool-1-z3&#x000A;web-x4      1/1   Running   [...]         gke-xx-temp-pool-1-z4&#x000A;</code></pre>
<h2 id="step7">End your lab</h2>
<p>When you have completed your lab, click <strong>End Lab</strong>. Qwiklabs removes the resources you’ve used and cleans the account for you.</p>
<p>You will be given an opportunity to rate the lab experience. Select the applicable number of stars, type a comment, and then click <strong>Submit</strong>.</p>
<p>The number of stars indicates the following:</p>
<ul>
<li>1 star = Very dissatisfied</li>
<li>2 stars = Dissatisfied</li>
<li>3 stars = Neutral</li>
<li>4 stars = Satisfied</li>
<li>5 stars = Very satisfied</li>
</ul>
<p>You can close the dialog box if you don't want to provide feedback.</p>
<p>For feedback, suggestions, or corrections, please use the <strong>Support</strong> tab.</p>

<p>Copyright 2021 Google LLC All rights reserved. Google and the Google logo are trademarks of Google LLC. All other company and product names may be trademarks of the respective companies with which they are associated.</p>



</div>
</div>


<div class='hidden js-end-lab-button-container lab-content__end-lab-button'>
<ql-lab-control-button class='js-end-lab-button' running></ql-lab-control-button>
</div>
<!-- / TODO: Move recommendations into the end lab modal -->
</ql-drawer-content>
<ql-drawer end id='outline-drawer' open slot='drawer' width='320'>
<div class='js-lab-content-outline lab-content__outline'>
<a href='#step1'>Overview</a><a href='#step2'>Objectives</a><a href='#step3'>Task 0. Lab Setup</a><a href='#step4'>Task 1. Connect to the lab GKE cluster and deploy a sample workload</a><a href='#step5'>Task 2. Configure autoscaling on the cluster</a><a href='#step6'>Task 3. Manage node pools</a><a href='#step7'>End your lab</a>
</div>
</ql-drawer>
</ql-drawer-container>
</ql-drawer-content>
</ql-drawer-container>
<div class='lab-introduction js-lab-introduction is-hidden'>
<div class='lab-introduction__inner'>
<h1 class='headline-1'>Welcome to Your First Lab!</h1>
<ql-icon-button class='js-skip-button'>close</ql-icon-button>
<div class='lab-introduction__video'>
<iframe allow='autoplay; encrypted-media' allowfullscreen frameborder='0' id='lab-introduction' src='https://www.youtube.com/embed/yF7EDXKTmoQ?enablejsapi=1&amp;rel=0&amp;showinfo=0'></iframe>
</div>
<a class='js-skip-button button button--outline'>Skip this video</a>
</div>
</div>



</div>
</main>


<div class='modal fade' id='lab-details-modal'>
<div class='modal-container'>
<div class='mdl-shadow--24dp modal-content'>
<div class='modal-body'>
<p class='l-mbm'>
Architecting with Google Kubernetes Engine: Configuring Pod Autoscaling and NodePools
</p>
<p class='small-label l-mbs'>
<strong>
Duration:
</strong>
3m setup
&middot;
60m access
&middot;
60m completion
</p>
<p class='small-label l-mbs'>
<span><strong>Levels: </strong>fundamental</span>
</p>
<p class='small-label'>
<strong>
Permalink:
</strong>
<a href="https://googlecoursera.qwiklabs.com/catalog_lab/2300">https://googlecoursera.qwiklabs.com/catalog_lab/2300</a>
</p>
</div>
<div class='modal-actions'>
<a class='button button--text' data-dismiss='modal'>
Got It
</a>
</div>


</div>
</div>
<iframe class='l-ie-iframe-fix'></iframe>
</div>
<div class='modal fade' id='lab-review-modal'>
<div class='modal-container'>
<div class='mdl-shadow--24dp modal-content'>
<form class="simple_form js-lab-review-form" id="new_lab_review" action="/lab_reviews" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='modal-body'>
<p class='label'>
How satisfied are you with this lab?*
</p>
<div class='rateit js-rateit' data-rateit-max='5' data-rateit-min='0' data-rateit-resetable='false' data-rateit-step='1' data-rateit-value='0'></div>
<div class='l-mtm'>

<div class="control-group hidden lab_review_user_id"><div class="controls"><input class="hidden" type="hidden" value="3894861" name="lab_review[user_id]" id="lab_review_user_id" /></div></div>
<div class="control-group hidden lab_review_classroom_id"><div class="controls"><input class="hidden" type="hidden" name="lab_review[classroom_id]" id="lab_review_classroom_id" /></div></div>
<div class="control-group hidden lab_review_lab_id"><div class="controls"><input class="hidden" type="hidden" value="2300" name="lab_review[lab_id]" id="lab_review_lab_id" /></div></div>
<div class="control-group hidden lab_review_focus_id"><div class="controls"><input class="hidden" type="hidden" name="lab_review[focus_id]" id="lab_review_focus_id" /></div></div>
<div class="control-group hidden lab_review_rating"><div class="controls"><input class="hidden js-rating-input" type="hidden" name="lab_review[rating]" id="lab_review_rating" /></div></div>
<div class="control-group text optional lab_review_comment"><label class="text optional control-label" for="lab_review_comment">Comment</label><div class="controls"><textarea class="text optional" name="lab_review[comment]" id="lab_review_comment">
</textarea></div></div>
</div>
</div>
<div class='modal-actions'>
<a class='button button--text' data-dismiss='modal'>
Cancel
</a>
<input type="submit" name="commit" value="Submit" disabled="disabled" id="submit" data-disabled="false" class="button" data-disable-with="Submit" />
</div>
</form>

</div>
</div>
<iframe class='l-ie-iframe-fix'></iframe>
</div>


<script>
  $( function() {
    ql.initMaterialInputs();
    initChosen();
    initSearch();
    initTabs();
    ql.list.init();
    ql.favoriting.init();
    ql.header.myAccount.init();
    initTooltips();
    ql.autocomplete.init();
    ql.modals.init();
    ql.toggleButtons.init();
    ql.analytics.init();
    ql.labControlPanel.addRecaptchaErrorHandler();
  initLabContent();
  ql.labOutline.links.init();
  initLabReviewModal();
  ql.labAssessment.init();
  ql.labIntroduction.init( true );
  ql.labData.init();
  initLabTranslations( {"are_you_sure":"All done? If you end this lab, you will lose all your work. You may not be able to restart the lab if there is a quota limit. Are you sure you want to end this lab?\n","in_progress":"*In Progress*","ending":"*Ending*","starting":"*Starting, please wait*","end_concurrent_labs":"Sorry, you can only run one lab at a time. To start this lab, please confirm that you want all of your existing labs to end.\n","copied":"Copied","no_resource":"Error retrieving resource.","no_support":"No Support","mac_press":"Press ⌘-C to copy","thanks_review":"Thanks for reviewing this lab.","windows_press":"Press Ctrl-C to copy","days":"days"} );
  ql.labRun.init();
  ql.chat.init();
  ql.initHeader();
  ql.navigation.init();
  ql.navPanel.init();
  ql.navigation.init();
  
  });
</script>

</body>
</html>

