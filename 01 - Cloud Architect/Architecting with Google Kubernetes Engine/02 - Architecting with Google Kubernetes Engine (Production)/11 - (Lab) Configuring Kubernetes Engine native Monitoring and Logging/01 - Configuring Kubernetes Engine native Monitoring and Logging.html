
<!DOCTYPE html>
<html lang='en'>
<head>
<title>Configuring Kubernetes Engine native Monitoring and Logging | Qwiklabs</title>
<script>
//<![CDATA[
window.gon={};gon.current_user={"firstname":"DANIEL","lastname":"ENRIQUE SANDOVAL SANCHEZ","fullname":"DANIEL ENRIQUE SANDOVAL SANCHEZ","company":"Coursera","email":"desandovals@liverpool.com.mx","origin":"googlecoursera-run, lti-coursera","subscriptions":0,"id":"40414ff5fc280f833d9acca966912f93","qlCreatedAt":"2020-11-17 20:45:59 UTC","optIn":null,"current_organization_id":null,"current_organization_role":null};gon.segment="j4Im8pqIko0Lxq4wVVZWMPMM0EroHUvb";gon.deployment="googlecoursera-run";gon.content={"type":"Lab","id":2307,"name":"Configuring Kubernetes Engine native Monitoring and Logging"};
//]]>
</script>
<script>
  dataLayer = [
    {user: gon.current_user},
    {content: gon.content}
  ];
</script>
<script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer',"GTM-TQR88QK");
</script>
<script>
  EVENT_SOURCE_BASE_URL = "https://googlecoursera-run.qwiklabs.com/nchan-sub?id=";
</script>
<script src="https://cdn.qwiklabs.com/assets/hallofmirrors/polyfills/webcomponents-loader-408088dc333247a761de5f2b2a4ba1cabd2bc36579f83ba92a559eb3682a9b77.js"></script>
<script src="https://cdn.qwiklabs.com/assets/vendor-45d462772c30000424907184f70c7157e95fb6227698d1671c5051818a6f60d8.js"></script>
<script src="https://cdn.qwiklabs.com/assets/application-6874b164d8346f46605fc772a6f7375a39626ffc9f6d168e23a3a8c40bb6fd28.js"></script>
<script src="https://cdn.qwiklabs.com/assets/hallofmirrors/hallofmirrors-b7ff781d00ceebdf75589f58475cea695bafd8d5cc1f3eb4baf6122ed4a4b736.js"></script>
<!--[if lt IE 9]>
<script src='http://html5shim.googlecode.com/svn/trunk/html5.js' type='text/javascript'></script>
<![endif]-->
<!--[endif]>  <![endif]-->
<script type='application/ld+json'>
{
  "@context": "http://schema.org",
  "@type": "WebSite",
  "url": "https://www.qwiklabs.com/",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://www.qwiklabs.com/catalog?keywords={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>
<script id='ze-snippet' src='https://static.zdassets.com/ekr/snippet.js?key=511e4158-0aec-4e3c-b2e6-4daa1769f51e'></script>


<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="N+RQ7gEEMVfrpAwN5Gkhrk4Sj4O85POJv7sjOGMqWAnsiO8ikeD10L0T7XIprgeAkYoOUlqsmGoQJ3MqpKEqAA==" />
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=0' name='viewport'>
<meta content='1rRsY0INj8RvwB5EF5pwdxt2A2P9aDgAlsICaJ0d5w0' name='google-site-verification'>
<meta content='#3681E4' property='msapplication-TileColor'>
<meta content='/favicon-144.png' property='msapplication-TileImage'>
<meta content='[{&quot;id&quot;:&quot;recaptcha_experiment&quot;,&quot;optimize_id&quot;:&quot;dpViOcLkT3qS4TvL2mRojA&quot;,&quot;title&quot;:&quot;No Recaptcha shown for trusted users&quot;,&quot;variant_index&quot;:0,&quot;variant&quot;:&quot;original&quot;}]' name='active-experiments'>
<meta content='{&quot;userId&quot;:3894861}' name='help-api-product-data'>
<meta content='Architecting with Google Kubernetes Engine: Configuring Kubernetes Engine native Monitoring and Logging' name='description'>
<meta content='Qwiklabs' name='author'>
<meta content='Configuring Kubernetes Engine native Monitoring and Logging | Qwiklabs' property='og:title'>
<meta content='website' property='og:type'>
<meta content='/favicon-144.png' property='og:image'>
<meta content='Qwiklabs' property='og:site_name'>
<meta content='Architecting with Google Kubernetes Engine: Configuring Kubernetes Engine native Monitoring and Logging' property='og:description'>
<meta content='/qwiklabs_logo_900x887.png' property='og:logo' size='900x887'>
<meta content='/qwiklabs_logo_994x187.png' property='og:logo' size='994x187'>


<link href='/favicon-32.png' rel='shortcut icon'>
<link color='#3681E4' href='/favicon-svg.svg' rel='mask-icon'>
<link href='/favicon-180.png' rel='apple-touch-icon-precomposed'>



<link rel="stylesheet" media="screen" href="https://fonts.googleapis.com/css?family=Oswald:400|Roboto+Mono:400,700|Roboto:300,400,500,700|Google+Sans:300,400,500,700|Google+Sans+Display:400|Material+Icons|Google+Material+Icons" />


<link rel="stylesheet" media="all" href="https://cdn.qwiklabs.com/assets/application-cf67fd00dd904ecce1e24779d7504aefc7fbd5d00696246fa80212743a81bf07.css" />



</head>
<body class='lab-show l-full no-nav application-new focuses focuses-show lab-show l-full no-nav '>
<noscript>
<iframe height='0' src='https://www.googletagmanager.com/ns.html?id=GTM-TQR88QK' style='display:none;visibility:hidden;' width='0'></iframe>
</noscript>
<span class='hidden' id='flash-sibling-before'></span>

<div class='header-container'>
<div class='header'>
<ql-icon-button class='js-nav-toggle header__nav-panel-button l-mrm'>menu</ql-icon-button>
<div class='header__title'>
<ql-icon-button label="Back" href="https://www.coursera.org/" id="caeb467d4edb5e50" target="_self">arrow_back</ql-icon-button><div class="mdl-tooltip" data-mdl-for="caeb467d4edb5e50">Back</div>

<h1 class='headline-5'>
Configuring Kubernetes Engine native Monitoring and Logging
</h1>
</div>
<div class='header__actions'>
<ql-icon-button class='header__button--search js-header-search-bar-button'>search</ql-icon-button>
<ql-icon-button id='control-panel-target' style='display: none;'>
dashboard
</ql-icon-button>
<ql-menu for='control-panel-target' id='control-panel-menu'></ql-menu>

<ql-icon-button id='help-menu-button'>help</ql-icon-button>
<div class='mdl-tooltip js-tooltip' data-mdl-for='help-menu-button'>
Help
</div>
<ql-menu for='help-menu-button' id='help-menu'>
<ql-menu-item>
<ql-help context='lab' data-analytics-action='opened_help' data-analytics-label='lab' productdata='{&quot;userId&quot;:3894861}'>
Help Center
</ql-help>
</ql-menu-item>
<ql-menu-item>
<a target="_blank" class="ql-body-1" href="https://support.google.com/qwiklabs/contact/contact_us">Email support</a>
</ql-menu-item>
<ql-menu-item>
<a class='ql-body-1' onClick='ql.chat.open()'>Chat support</a>
</ql-menu-item>
</ql-menu>

<ql-icon-button id='language'>language</ql-icon-button>
<div class='mdl-menu mdl-menu__bottom-right mdl-js-menu elevation-3' for='language'>
<a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="ar" href="/focuses/15531684?locale=ar&amp;parent=lti_session">العربية‬‎
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="de" href="/focuses/15531684?locale=de&amp;parent=lti_session">Deutsch
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="en" href="/focuses/15531684?locale=en&amp;parent=lti_session">English
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="es" href="/focuses/15531684?locale=es&amp;parent=lti_session">español (Latinoamérica)
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="fr" href="/focuses/15531684?locale=fr&amp;parent=lti_session">français
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="id" href="/focuses/15531684?locale=id&amp;parent=lti_session">bahasa Indonesia
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="it" href="/focuses/15531684?locale=it&amp;parent=lti_session">Italiano
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="ja" href="/focuses/15531684?locale=ja&amp;parent=lti_session">日本語
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="ko" href="/focuses/15531684?locale=ko&amp;parent=lti_session">한국어
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="pl" href="/focuses/15531684?locale=pl&amp;parent=lti_session">Polski
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="pt_BR" href="/focuses/15531684?locale=pt_BR&amp;parent=lti_session">português (Brasil)
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="pt_PT" href="/focuses/15531684?locale=pt_PT&amp;parent=lti_session">português (Portugal)
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="ru" href="/focuses/15531684?locale=ru&amp;parent=lti_session">русский
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="tr" href="/focuses/15531684?locale=tr&amp;parent=lti_session">Türkçe
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="zh" href="/focuses/15531684?locale=zh&amp;parent=lti_session">简体中文
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="zh_TW" href="/focuses/15531684?locale=zh_TW&amp;parent=lti_session">繁體中文
</a></div>
<button class='icon-button' id='my_account'>
<ql-avatar></ql-avatar>
</button>
<ql-menu for='my_account' open>
<div class='my-account-menu'>
<ql-avatar class='l-mtl l-mbl' size='120'></ql-avatar>
<div class='my-account-menu__user-info l-mbl'>
<h4 class='ql-subhead-1'>DANIEL ENRIQUE SANDOVAL SANCHEZ</h4>
<p class='ql-body-2 text--light'>desandovals@liverpool.com.mx</p>
<p class='ql-body-2 text--light'>
</p>
<a class="text--green ql-subhead-2" href="/my_account/payments"><ql-chip positive>
0 Credits
</ql-chip>
</a></div>
<div class='buttons l-mbl'>
<a class="button button--hairline" id="settings" href="/my_account/profile">Settings</a>
</div>
<hr>
<ql-button data-analytics-action='clicked_sign_out' href='/users/sign_out' method='delete'>
Sign Out
</ql-button>
<div class='privacy l-mtl'>
<a class="ql-caption text--light" href="/privacy_policy">Privacy</a>
<span class='ql-caption text--light l-mls l-mrs'>&middot;</span>
<a class="ql-caption text--light" href="/terms_of_service">Terms</a>
</div>
</div>
</ql-menu>

</div>
</div>
<div class='header__search-bar js-header-search-bar'>
<form class="js-search-form-mobile" onsubmit="ql.searchFilter(); return false;" action="/searches/elasticsearch" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="SGYeK90Mcyfyy0ONfYTIVePDS4GVUqUqz1bdMYtEqjCTCqHnTei3oKR8ovKwQ+57PFvKUHMazslgyo0jTM/YOQ==" />
<input type="text" name="keywords" id="keywords" placeholder="Search" maxlength="255" aria-label="catalog search bar" />
</form>

<ql-icon-button class='js-close-search-bar'>close</ql-icon-button>
</div>
</div>

<nav class='nav-bar'>
<a class="nav-bar__item js-navigation-button" href="/"><ql-icon class='nav-bar__item__icon'>
home
</ql-icon>
<span class='nav-bar__item__label'>
Home
</span>
</a>
<a class="nav-bar__item js-navigation-button" href="/catalog"><ql-icon class='nav-bar__item__icon'>
school
</ql-icon>
<span class='nav-bar__item__label'>
Catalog
</span>
</a>
<a class="nav-bar__item js-navigation-button" href="/my_learning"><ql-icon class='nav-bar__item__icon'>
event_note
</ql-icon>
<span class='nav-bar__item__label'>
My Learning
</span>
</a>
</nav>

<nav class='nav-panel js-nav-panel'>
<div class='nav-panel__logo'>
<div class='logo logo--blue'></div>
</div>
<a title="Home" tabindex="-1" class="nav-panel__item js-navigation-button" href="/"><ql-icon class='nav-panel__item__icon'>
home
</ql-icon>
<div class='nav-panel__item__label'>
Home
</div>
</a>
<a title="Catalog" tabindex="-1" class="nav-panel__item js-navigation-button" href="/catalog"><ql-icon class='nav-panel__item__icon'>
school
</ql-icon>
<div class='nav-panel__item__label'>
Catalog
</div>
</a>
<a title="My Learning" tabindex="-1" class="nav-panel__item js-navigation-button" href="/my_learning"><ql-icon class='nav-panel__item__icon'>
event_note
</ql-icon>
<div class='nav-panel__item__label'>
My Learning
</div>
</a>
<div class='nav-panel__spacer'></div>
<a title="Profile" tabindex="-1" class="nav-panel__item js-navigation-button" href="/my_account/profile"><ql-icon class='nav-panel__item__icon'>
account_circle
</ql-icon>
<div class='nav-panel__item__label'>
Profile
</div>
</a>
<a title="Credits &amp; Subscriptions" tabindex="-1" class="nav-panel__item js-navigation-button" href="/my_account/credits"><ql-icon class='nav-panel__item__icon'>
money
</ql-icon>
<div class='nav-panel__item__label'>
Credits &amp; Subscriptions
</div>
</a>
<a title="Security" tabindex="-1" class="nav-panel__item js-navigation-button" href="/my_account/security"><ql-icon class='nav-panel__item__icon'>
security
</ql-icon>
<div class='nav-panel__item__label'>
Security
</div>
</a>
<div class='nav-panel__spacer'></div>
<a class="nav-panel__item" tabindex="-1" href="#"><ql-help>
<div class='nav-panel__help-item'>
<ql-icon class='nav-panel__item__icon'>help</ql-icon>
<div class='nav-panel__item__label'>
Help
</div>
</div>
</ql-help>
</a><div class='nav-panel__small-links'>
<a tabindex="-1" href="/privacy_policy">Privacy</a>
<a tabindex="-1" href="/terms_of_service">Terms</a>
</div>
</nav>
<div class='nav-panel__overlay js-nav-toggle'></div>

<main class='js-main'>
<div class='l-main-wrapper' id='main-wrapper'>







<div class='lab-assessment__tab js-open-lab-assessment-panel'>
<h6 class='js-lab-assessment-total-score'>
&mdash;/15
</h6>
</div>
<div class='lab-assessment__panel js-lab-assessment-panel'>
<div class='lab-assessment__panel__header'>
<h4>Checkpoints</h4>
<ql-icon-button class='js-close-lab-assessment-panel'>arrow_forward</ql-icon-button>
</div>
<div class='lab-assessment__step'>
<p class='lab-assessment__step__title'>
Configuring a GKE cluster with Kubernetes Engine Monitoring and deploy a sample workload
</p>
<div class='lab-assessment__step__action'>
<a class='button js-show-run-step-button' step_no='1'>
Check my progress
</a>
<p class='lab-assessment__step__score'>
<span class='js-assessment-step-score-1'>
</span>
/ 5
</p>
</div>
</div>

<div class='lab-assessment__step'>
<p class='lab-assessment__step__title'>
Deploy the GCP-GKE-Monitor-Test application
</p>
<div class='lab-assessment__step__action'>
<a class='button js-show-run-step-button' step_no='2'>
Check my progress
</a>
<p class='lab-assessment__step__score'>
<span class='js-assessment-step-score-2'>
</span>
/ 5
</p>
</div>
</div>

<div class='lab-assessment__step'>
<p class='lab-assessment__step__title'>
Creating Alerts with Stackdriver Kubernetes Engine Monitoring
</p>
<div class='lab-assessment__step__action'>
<a class='button js-show-run-step-button' step_no='3'>
Check my progress
</a>
<p class='lab-assessment__step__score'>
<span class='js-assessment-step-score-3'>
</span>
/ 5
</p>
</div>
</div>

</div>
<ql-drawer-container class='js-lab-state' data-analytics-payload='{&quot;label&quot;:&quot;Configuring Kubernetes Engine native Monitoring and Logging&quot;,&quot;lab_name&quot;:&quot;Configuring Kubernetes Engine native Monitoring and Logging&quot;,&quot;classroom_name&quot;:null,&quot;deployment&quot;:&quot;googlecoursera-run&quot;}' data-focus-id='15531684' data-lab-billing-limit='0.0' data-lab-duration='3600' data-parent='lti_session' data-recaptcha-enabled id='lab-container'>
<ql-drawer id='terminal-drawer' slot='drawer' style='width: calc(100% - 480px)'>
<iframe allow='clipboard-read' class='terminal' id='embedded-resource'></iframe>
</ql-drawer>
<ql-drawer-content class='js-lab-wrapper' id='lab-content' slot='drawer-content'>
<ql-drawer-container id='lab-content-container'>
<ql-drawer id='control-panel-drawer' open slot='drawer' width='320'>
<ql-lab-control-panel class='ql-lab-control-panel__max-height control-panel js-lab-control-panel' connectionFiles='[]' labControlButton='{&quot;disabled&quot;:false,&quot;pending&quot;:false,&quot;running&quot;:false}' labDetails='[]' labTimer='{&quot;ticking&quot;:false,&quot;secondsRemaining&quot;:3600}' studentResources='[]'>
<script src="https://www.recaptcha.net/recaptcha/api.js?render=6LeVI8IUAAAAAJNdox5eTkYrw9SbvhZ1TFyv3iHr"   ></script>
        <script>
          // Define function so that we can call it again later if we need to reset it
          // This executes reCAPTCHA and then calls our callback.
          function executeRecaptchaForStartLab() {
            grecaptcha.ready(function() {
              grecaptcha.execute('6LeVI8IUAAAAAJNdox5eTkYrw9SbvhZ1TFyv3iHr', {action: 'start_lab'}).then(function(token) {
                setInputWithRecaptchaResponseTokenForStartLab('g-recaptcha-response-data-start-lab', token)
              });
            });
          };
          // Invoke immediately
          executeRecaptchaForStartLab()

          // Async variant so you can await this function from another async function (no need for
          // an explicit callback function then!)
          // Returns a Promise that resolves with the response token.
          async function executeRecaptchaForStartLabAsync() {
            return new Promise((resolve, reject) => {
              grecaptcha.ready(async function() {
                resolve(await grecaptcha.execute('6LeVI8IUAAAAAJNdox5eTkYrw9SbvhZ1TFyv3iHr', {action: 'start_lab'}))
              });
            })
          };

                    var setInputWithRecaptchaResponseTokenForStartLab = function(id, token) {
            var element = document.getElementById(id);
            element.value = token;
          }

        </script>
<input type="hidden" name="g-recaptcha-response-data[start_lab]" id="g-recaptcha-response-data-start-lab" data-sitekey="6LeVI8IUAAAAAJNdox5eTkYrw9SbvhZ1TFyv3iHr" class="g-recaptcha g-recaptcha-response "/>

<div class='hidden' id='recaptcha-v2-start-lab' slot='recaptcha'>
<script src="https://www.recaptcha.net/recaptcha/api.js" async defer ></script>
<div data-sitekey="6LeOI8IUAAAAAPkHlMAE9NReCD_1WD81iYlBlCnV" data-callback="recaptchaComplete" data-expired-callback="expireV2Token" class="g-recaptcha "></div>
          <noscript>
            <div>
              <div style="width: 302px; height: 422px; position: relative;">
                <div style="width: 302px; height: 422px; position: absolute;">
                  <iframe
                    src="https://www.recaptcha.net/recaptcha/api/fallback?k=6LeOI8IUAAAAAPkHlMAE9NReCD_1WD81iYlBlCnV"
                    name="ReCAPTCHA"
                    style="width: 302px; height: 422px; border-style: none; border: 0; overflow: hidden;">
                  </iframe>
                </div>
              </div>
              <div style="width: 300px; height: 60px; border-style: none;
                bottom: 12px; left: 25px; margin: 0px; padding: 0px; right: 25px;
                background: #f9f9f9; border: 1px solid #c1c1c1; border-radius: 3px;">
                <textarea id="g-recaptcha-response" name="g-recaptcha-response"
                  class="g-recaptcha-response"
                  style="width: 250px; height: 40px; border: 1px solid #c1c1c1;
                  margin: 10px 25px; padding: 0px; resize: none;">
                </textarea>
              </div>
            </div>
          </noscript>

</div>
</ql-lab-control-panel>
</ql-drawer>
<ql-drawer-content id='lab-instructions' slot='drawer-content'>
<div class='alert alert--fake js-alert'>
<p class='alert__message js-alert-message'></p>
<a class='alert__close js-alert-close'>
<i class='fa fa-times'></i>
</a>
<iframe class='l-ie-iframe-fix'></iframe>
</div>
<div class='js-lab-content lab-content__renderable-instructions'>
<div class='lab-preamble'>
<h1 class='lab-preamble__title'>
Configuring Kubernetes Engine native Monitoring and Logging
</h1>
<div class='lab-preamble__details subtitle-headline-1'>
<span>1 hour </span>
<span>Free</span>
<div class='lab__rating'>
<a href="/focuses/15531684/reviews?parent=lti_session"><div class='rateit' data-rateit-readonly='true' data-rateit-value='3.9449'></div>

</a><a data-target='#lab-review-modal' data-toggle='modal'>
Rate Lab
</a>
</div>
</div>
</div>

<div class='js-markdown-instructions markdown-lab-instructions' id='markdown-lab-instructions'>



<h2 id="step1">Overview</h2>
<p>In this lab, you build a GKE cluster and then deploy pods for use with Kubernetes Engine Monitoring. You will create charts and a custom dashboard, work with custom metrics, and create and respond to alerts.</p>
<h2 id="step2">Objectives</h2>
<p>In this lab, you learn how to perform the following tasks:</p>
<ul>
<li>
<p>Use Kubernetes Engine Monitoring to view cluster and workload metrics</p>
</li>
<li>
<p>Use Cloud Monitoring Alerting to receive notifications about the cluster’s health</p>
</li>
</ul>
<h2 id="step3">Task 0. Lab Setup</h2>
<h3>Access Qwiklabs</h3>
<p>For each lab, you get a new GCP project and set of resources for a fixed time at no cost.</p>
<ol>
<li>
<p>Make sure you signed into Qwiklabs using an <strong>incognito window</strong>.</p>
</li>
<li>
<p>Note the lab's access time (for example, <img alt="img/time.png" src="https://cdn.qwiklabs.com/aZQJ4BT7uCmM9XR6BTXgTRP1Hfu1T7q6V%2BcnbdEsbpU%3D"> and make sure you can finish in that time block.</p>
</li>
</ol>
<aside> <p>
  There is no pause feature. You can restart if needed, but you have to start at the beginning.
  </p>

</aside>
<ol start="3">
<li>
<p>When ready, click <img alt="img/start_lab.png" src="https://cdn.qwiklabs.com/XE8x7uvQokyubNwnYKKc%2BvBBNrMlo5iNZiDDzQQ3Ddo%3D">.</p>
</li>
<li>
<p>Note your lab credentials. You will use them to sign in to Cloud Platform Console.
<img alt="img/open_google_console.png" src="https://cdn.qwiklabs.com/0d78dhX6IVMVWmixCPPSBbmi5O2GPokCXf1Ps1AkTgI%3D"></p>
</li>
<li>
<p>Click <strong>Open Google Console</strong>.</p>
</li>
<li>
<p>Click <strong>Use another account</strong> and copy/paste credentials for <strong>this</strong> lab into the prompts.</p>
</li>
</ol>
<aside class="warning"><p>
  If you use other credentials, you'll get errors or <strong>incur charges</strong>.
  </p>
</aside>
<ol start="7">
<li>Accept the terms and skip the recovery resource page.</li>
</ol>
<aside class="warning"><p>
  Do not click <strong>End Lab</strong> unless you are finished with the lab or want to restart it. This clears your work and removes the project.
  </p>
</aside>

<h3>Activate Google Cloud Shell</h3>
<p>Google Cloud Shell is a virtual machine that is loaded with development tools. It offers a persistent 5GB home directory and runs on the Google Cloud.
Google Cloud Shell provides command-line access to your GCP resources.</p>
<ol>
<li>
<p>In GCP console, on the top right toolbar, click the Open Cloud Shell button.</p>
<p><img alt="Cloud Shell icon" src="https://cdn.qwiklabs.com/vdY5e%2Fan9ZGXw5a%2FZMb1agpXhRGozsOadHURcR8thAQ%3D"></p>
</li>
<li>
<p>Click <strong>Continue</strong>.
<img alt="cloudshell_continue.png" src="https://cdn.qwiklabs.com/lr3PBRjWIrJ%2BMQnE8kCkOnRQQVgJnWSg4UWk16f0s%2FA%3D"></p>
</li>
</ol>
<p>It takes a few moments to provision and connect to the environment. When you are connected, you are already authenticated, and the project is set to your <em>PROJECT_ID</em>. For example:</p>
<p><img alt="Cloud Shell Terminal" src="https://cdn.qwiklabs.com/hmMK0W41Txk%2B20bQyuDP9g60vCdBajIS%2B52iI2f4bYk%3D"></p>
<p><strong>gcloud</strong> is the command-line tool for Google Cloud Platform. It comes pre-installed on Cloud Shell and supports tab-completion.</p>
<p>You can list the active account name with this command:</p>
<pre><code>gcloud auth list&#x000A;</code></pre>
<p>Output:</p>
<pre><code class="language-output prettyprint">Credentialed accounts:&#x000A; - &lt;myaccount&gt;@&lt;mydomain&gt;.com (active)&#x000A;</code></pre>
<p>Example output:</p>
<pre><code class="language-Output prettyprint">Credentialed accounts:&#x000A; - google1623327_student@qwiklabs.net&#x000A;</code></pre>
<p>You can list the project ID with this command:</p>
<pre><code>gcloud config list project&#x000A;</code></pre>
<p>Output:</p>
<pre><code class="language-output prettyprint">[core]&#x000A;project = &lt;project_ID&gt;&#x000A;</code></pre>
<p>Example output:</p>
<pre><code class="language-Output prettyprint">[core]&#x000A;project = qwiklabs-gcp-44776a13dea667a6&#x000A;</code></pre>
<ql-infobox>
  Full documentation of <strong>gcloud</strong> is available on
  <a href="https://cloud.google.com/sdk/gcloud" target="_blank">
    Google Cloud gcloud Overview
  </a>.
</ql-infobox>

<h2 id="step4">Task 1. Using Kubernetes Engine Monitoring</h2>
<p>Google Kubernetes Engine now includes managed support for Monitoring. When you create a GKE cluster, you can select one of the two Monitoring support options:</p>
<ul>
<li>Legacy Cloud Monitoring.</li>
<li>System and workload logging and monitoring.</li>
</ul>
<p>In this task, you will create a new cluster with Kubernetes Engine Monitoring support and then perform typical monitoring tasks using the Kubernetes Engine monitoring and logging interface. Legacy Cloud Monitoring support is the default for GKE versions up to, and including, v1.13. System and workload logging and monitoring is the default for versions v1.14 and newer.</p>
<h3>Configuring a GKE cluster with Kubernetes Engine Monitoring</h3>
<p>In this task, you will create a GKE cluster with Kubernetes Engine Monitoring enabled. Then you will deploy sample workloads to your GKE cluster for later use in this exercise.</p>
<ol>
<li>
<p>In Cloud Shell, type the following command to create environment variables for the Google Cloud zone and cluster name that will be used to create the cluster for this lab.</p>
</li>
</ol>
<pre><code>export my_zone=us-central1-a&#x000A;export my_cluster=standard-cluster-1&#x000A;</code></pre>
<ol start="2">
<li>
<p>Configure tab completion for the  kubectl command-line tool.</p>
</li>
</ol>
<pre><code>source &lt;(kubectl completion bash)&#x000A;</code></pre>
<ol start="3">
<li>
<p>Create a VPC-native Kubernetes cluster with native Kubernetes monitoring enabled.</p>
</li>
</ol>
<pre><code>gcloud container clusters create $my_cluster \&#x000A;   --num-nodes 3 --enable-ip-alias --zone $my_zone  \&#x000A;   --enable-stackdriver-kubernetes&#x000A;</code></pre>
<ql-infobox><strong>Note:</strong> You need to wait a few minutes for the cluster deployment to complete.</ql-infobox>
<ol start="4">
<li>
<p>Configure access to your cluster for kubectl:</p>
</li>
</ol>
<pre><code>gcloud container clusters get-credentials $my_cluster --zone $my_zone&#x000A;</code></pre>
<h3>Use the Google Cloud Console to verify monitoring's configuration</h3>
<ol>
<li>
<p>In the Google Cloud Console, on the <strong>Navigation menu</strong> (<img alt="9a951fa6d60a98a5.png" src="https://cdn.qwiklabs.com/fXo8j8i%2FKJoMkZ7FeHUYU7Vvu2PQfFZtFbLISSnYEaY%3D">), click <strong>Kubernetes Engine</strong> &gt; <strong>Clusters</strong>.</p>
</li>
<li>
<p>Click the cluster name <strong>standard-cluster-1</strong> to view the cluster details</p>
</li>
</ol>
<p><img alt="Cluster_in_console.png" src="https://cdn.qwiklabs.com/6n60AANi%2By9s%2Fld9u18X26v%2F7sefcBQJOfaCAqMLVkU%3D"></p>
<ol start="3">
<li>
<p>You can scroll down the page to view more details.</p>
</li>
<li>
<p>Under the <strong>Features</strong> heading you can see the <strong>Cloud Operations for GKE</strong> settings that set the logging type to <strong>System and workload logging and monitoring</strong></p>
</li>
</ol>
<p><img alt="Cloud_Ops_in_Console.png" src="https://cdn.qwiklabs.com/MiUGYC4RKWLk7xQZqNUl%2BG1uCVk8WeCSoYcPl0qpMOY%3D"></p>
<h3>Deploy a sample workload to your GKE cluster</h3>
<p>You will now deploy a sample workload to the default namespace of your GKE cluster. This workload consists of a deployment of three pods running a simple Hello World demo application. Later in this lab exercise you will be able to monitor the health of this workload in Monitoring.</p>
<ol>
<li>
<p>In Cloud Shell enter the following command  to clone the lab repository to the lab Cloud Shell.</p>
</li>
</ol>
<pre><code>git clone https://github.com/GoogleCloudPlatform/training-data-analyst&#x000A;</code></pre>
<ol start="2">
<li>
<p>Create a soft link as a shortcut to the working directory.</p>
</li>
</ol>
<pre><code>ln -s ~/training-data-analyst/courses/ak8s/v1.1 ~/ak8s&#x000A;</code></pre>
<ol start="3">
<li>
<p>Change to the directory that contains the sample files for this lab.</p>
</li>
</ol>
<pre><code>cd ~/ak8s/Monitoring/&#x000A;</code></pre>
<ol start="4">
<li>
<p>In the Cloud Shell, execute the following command to deploy a manifest that creates a sample deployment that will provide some items for you to monitor later in this lab exercise using Monitoring.</p>
</li>
</ol>
<pre><code>kubectl create -f hello-v2.yaml&#x000A;</code></pre>
<p>This deployment manifest creates three Pods running a simple Hello World demo application.</p>
<ol start="5">
<li>
<p>In the Cloud Shell, execute the following command to verify the deployment exists.</p>
</li>
</ol>
<pre><code>kubectl get deployments&#x000A;</code></pre>
<p>The output of this command will show that the hello-v2 application is running in the default namespace:</p>
<pre><code>NAME       DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE&#x000A;hello-v2   3         3         3            3           6s&#x000A;</code></pre>
<p>Click <em>Check my progress</em> to verify the objective.
<ql-activity-tracking step="1">
Configuring a GKE cluster with Kubernetes Engine Monitoring and deploy a sample workload
</ql-activity-tracking></p>
<h3>Deploy the GCP-GKE-Monitor-Test application</h3>
<p>You will now deploy the GCP-GKE-Monitor-Test application to the default namespace of your GKE cluster. This workload has a deployment consisting of a single pod that is then exposed to the internet via a LoadBalancer service.</p>
<ol>
<li>
<p>In the Cloud Shell, execute the following command to store the current Project ID in an environment variable:</p>
</li>
</ol>
<pre><code>export PROJECT_ID="$(gcloud config get-value project -q)"&#x000A;</code></pre>
<ol start="2">
<li>
<p>In the Cloud Shell, execute the following command to change to the load application directory:</p>
</li>
</ol>
<pre><code>cd gcp-gke-monitor-test&#x000A;</code></pre>
<ol start="3">
<li>
<p>In the Cloud Shell, execute the following command to build the Docker image for the load testing application and push the image to the Google <strong>gcr.io</strong> registry for your lab project.</p>
</li>
</ol>
<pre><code>gcloud builds submit --tag=gcr.io/$PROJECT_ID/gcp-gke-monitor-test .&#x000A;</code></pre>
<p>Alternatively you can also use Docker directly to build and push an image to <strong>gcr.io</strong>.</p>
<pre><code>docker build -t gcr.io/${PROJECT_ID}/gcp-gke-monitor-test .&#x000A;</code></pre>
<ol start="4">
<li>In the Cloud Shell, execute the following command to change back to the main working directory for the lab:</li>
</ol>
<pre><code>cd ..&#x000A;</code></pre>
<ol start="5">
<li>In the Cloud Shell, execute the following command to replace a placeholder value in the <code>gcp-gke-monitor-test.yaml</code> file with the Docker image you just pushed to <strong>gcr.io</strong>.</li>
</ol>
<pre><code>sed -i "s/\[DOCKER-IMAGE\]/gcr\.io\/${PROJECT_ID}\/gcp-gke-monitor-test\:latest/" gcp-gke-monitor-test.yaml&#x000A;</code></pre>
<aside class="special">
<p>The <strong>sed</strong> command in UNIX is stands for <strong>stream editor</strong> and it can perform many functions on files such as replace, insertion, or deletion. Though most common use of <strong>sed</strong> is for substitution. By using <strong>sed</strong> you can edit files even without opening them, which is much quicker way to find and replace something in file, than first opening that file in an editor and then changing it.</p>
</aside>
<ol>
<li>
<p>In Cloud Shell enter the following command to deploy the manifest you just updated to create the deployment and service you will use to test Kubernetes Engine Monitoring.</p>
</li>
</ol>
<pre><code>kubectl create -f gcp-gke-monitor-test.yaml&#x000A;</code></pre>
<ol start="7">
<li>
<p>In the Cloud Shell, execute the following command to verify that the deployment exists.</p>
</li>
</ol>
<pre><code>kubectl get deployments&#x000A;</code></pre>
<p>The output of this command will show that the hello-v2 application is running in the default namespace:</p>
<pre><code>NAME                 DESIRED CURRENT UP-TO-DATE AVAIL AGE&#x000A;gcp-gke-monitor-test 1       1       1          0      1s&#x000A;hello-v2             3       3       3          3     38s&#x000A;&#x000A;</code></pre>
<ol start="8">
<li>
<p>In the Cloud Shell, execute the following command  to verify the service exists.</p>
</li>
</ol>
<pre><code>kubectl get service&#x000A;</code></pre>
<p>The output of this command will show that the gcp-gke-monitor-test-service is running in the default namespace. You may need to run this command multiple times until this service is assigned an external IP address.</p>
<p>Click <em>Check my progress</em> to verify the objective.
<ql-activity-tracking step="2">
Deploy the GCP-GKE-Monitor-Test application
</ql-activity-tracking></p>
<h2 id="step5">Task 2: Using the GCP-GKE-Monitor-Test application</h2>
<p>In this task you will use the GCP-GKE-Monitor-Test application to explore different aspects of Kubernetes Engine Monitoring. The tool is composed of four sections:</p>
<ul>
<li>Generate CPU Load</li>
<li>Custom Metrics</li>
<li>Log Test</li>
<li>Crash the Pod</li>
</ul>
<p><img alt="9a951fa6d60a98a5.png" src="https://cdn.qwiklabs.com/CIi92W%2BChdxKLxEnWrDfdqvRK%2BcFY6qrYmzVm3skdsM%3D"></p>
<p>In the first section, <strong>Generate CPU Load</strong>, you have buttons to start and stop a CPU Load Generator. The tool starts a loop of math operations which will consume an entire CPU core. To prevent losing control of the pod due to CPU saturation, the loop yields the processor periodically for 100 nanoseconds. This allows you to quickly stop the CPU Load Generator without killing the pod.</p>
<p>The second section, <strong>Custom Metrics</strong>, allows you to explore custom metric monitoring within Cloud Monitoring. When you click Start Monitoring, the tool first creates the necessary Custom Metric Descriptor, and then starts a loop which sends the custom metric values to Monitoring every 60 seconds. The custom metrics coded into this tool are designed to simulate an application that can keep track of the number of active users connected, and then report that number to an external service.</p>
<p>To take advantage of these custom metrics, some additional instrumentation may be required within your application's code. In this lab exercise you can simulate users connecting and disconnecting by clicking the Increase and Decrease Users buttons.</p>
<p>Also keep in mind that although the web tool will allow you to change the number of users in real time (just as users may connect and disconnect in real life), the Cloud Monitoring APIs only allow the tool to send its current value once per minute. This means your Cloud Monitoring charts will not reflect changes which occur between the per-minute updates.</p>
<p>The third section, <strong>Log Test</strong>, allows you to send different text strings to the container's standard output (the console), which is then periodically collected by Cloud Monitoring and stored as log messages associated with the pod and container. You can optionally enable Debug-level logging to see more entries in the logs. This will allow you to see messages in the logs when you increase the number of users in the Custom Metrics section, or when you enable or disable the CPU Load Generator. Note that these logs are sent in plain-text format to simulate legacy applications which do not support JSON formatted messages. When you view the logs in Logging you will notice that your pod's JSON-based Kubernetes event logs have much more robust filtering and querying options than what is available for the unstructured logs.</p>
<p>The fourth and final section, <strong>Crash the Pod</strong>, allows you to crash the pod with the click of a button. The tool executes a section of code with an unhandled error, which crashes the pod and triggers the deployment to restart a new pod in its place. You can use this tool to see how quickly Kubernetes Engine can recover from errors. It is also an opportunity to see the loss of session state in action because each pod maintains its own session instead of storing it in a central location. When the pod restarts, all your toggle buttons and settings return to their default values.</p>
<h3>Start the CPU Load Generator</h3>
<p>You will now open a web browser, connect to the GCP-GKE-Monitor-Test tool, and start the CPU load generator.</p>
<ol>
<li>
<p>In Cloud Shell enter the following command to get the EXTERNAL-IP address of the gcp-gke-monitor-test-service.</p>
</li>
</ol>
<pre><code>kubectl get service&#x000A;</code></pre>
<ol start="2">
<li>Open your web browser and navigate to the EXTERNAL-IP address of the service.</li>
<li>In the <strong>Generate CPU Load</strong> section, click the <strong>Start CPU Load</strong> button. Note that the STATUS text will change when the load generator starts running.</li>
</ol>
<p><img alt="a6940fe5670f3747.png" src="https://cdn.qwiklabs.com/BywU8M3fwzu7WLomKDBxm6eNV7lx0kM4Z5UEnr%2Fgw5o%3D"></p>
<h3>Start collecting custom metrics</h3>
<p>You will now start a process within the GCP-GKE-Monitor-Test tool which creates a Custom Metric Descriptor within Cloud Monitoring. Later, when the tool begins sending the custom metric data, Monitoring will associate the data with this metric descriptor. Note that Monitoring can often automatically create the custom metric descriptors for you when you send the custom metric data, but creating the descriptor manually gives you more control over the text that appears in the Monitoring interface, making it easier for you to find your data in the Metric Explorer.</p>
<ol>
<li>In the GCP-GKE-Monitor-Test tool, in the <strong>Custom Metrics</strong> section, click the <strong>Start Monitoring</strong> button.</li>
</ol>
<p><img alt="35202c540c6cb4c4.png" src="https://cdn.qwiklabs.com/EEnIsm5Z67t0N92PjCNsTgX%2BiwE4phjS4Sjy%2BtTnKkY%3D"></p>
<p>You can now click the Increase and Decrease Users buttons to change the Current User Count displayed below the STATUS text.</p>
<ol start="2">
<li>Click <strong>Increase Users Counter</strong> and repeat until the <strong>Current User Count</strong> is set to 10 users.</li>
</ol>
<p><img alt="c749bf42aeac8426.png" src="https://cdn.qwiklabs.com/74HpCYGawU%2Bh5v89rD%2FdjOca%2F3X%2FxsxJPB3BuOdSDek%3D"></p>
<p>It may take 2-3 minutes for the first data point to appear in Monitoring. You will check this custom metric in Cloud Monitoring in a later step.</p>
<h3>Generate test log messages</h3>
<p>You will now use the GCP-GKE-Monitor-Test tool to create sample text-based logs which you will later view in Cloud Monitoring.</p>
<ol>
<li>In the GCP-GKE-Monitor-Test tool, in the <strong>Log Test</strong> section, click the <strong>Enable Debug Logging</strong> button to increase the number of logs the tool generates.</li>
</ol>
<p><img alt="17cb0454d406b139.png" src="https://cdn.qwiklabs.com/2IcYYRQntthKtAaxOdYtsovm2xCd3Dxly0hvVOb0eIs%3D"></p>
<ol start="2">
<li>Click the other four log entry buttons to generate some additional sample log messages. It's important to select a variety of severity levels so that you can see how the different message types are displayed in Monitoring.</li>
</ol>
<p><img alt="15bf2ff552135033.png" src="https://cdn.qwiklabs.com/ebLNgVbZXU%2BYMFWOuDDwaG9SKMFLTFlR8jBiF5kSGFs%3D"></p>
<h2 id="step6">Task 3. Using Kubernetes Engine Monitoring</h2>
<p>In this task you will use Kubernetes Engine Monitoring to view the current health of your GKE cluster and the two workloads running on it.</p>
<h3>Create a Monitoring workspace</h3>
<p>You will now setup a Monitoring workspace that's tied to your Qwiklabs GCP Project. The following steps create a new account that has a free trial of Monitoring.</p>
<ol>
<li>
<p>In the Google Cloud Platform Console, click on <strong>Navigation menu</strong> &gt; <strong>Monitoring</strong>.</p>
</li>
<li>
<p>Wait for your workspace to be provisioned.</p>
</li>
</ol>
<p>When the Monitoring dashboard opens, your workspace is ready.</p>
<p><img alt="Overview.png" src="https://cdn.qwiklabs.com/FfS7W1mNXshxngUuea%2BFUBXoXedgDHt0YWk1aZKHiIk%3D"></p>

<h3>Review the Kubernetes Engine monitoring interface</h3>
<p>You will now open and browse the three different sections of the Kubernetes Engine Monitoring interface. The three sections are: Infrastructure, Workloads, and Services.</p>
<aside class="warning"><p><strong>Important</strong></p>
<p>The <strong>GKE</strong> option might not appear immediately in the Monitoring menus. It might take 5 to 10 minutes to enable the cluster for the new features. Refresh your page periodically until the option appears.</p>
</aside>
<ol>
<li>In the Monitoring interface, click <strong>GKE</strong>  in the <strong>Resource dashboards</strong> section to view the new monitoring interface.</li>
</ol>
<p><img alt="resouces_gke.png" src="https://cdn.qwiklabs.com/EmcfhuvOuA6HEWYdoeteaQA6FNmKum4lzkxkIwS%2Fyd4%3D"></p>
<ol start="2">
<li>
<p>Review the monitoring interface. This is a dashboard which shows the health of your GKE clusters and their workloads.  Take note of the following:</p>
</li>
</ol>
<ul>
<li>A dynamic timeline is displayed in the top portion of the interface. You can adjust the time range shown by selecting from the options at the top of the screen: 1h, 6h, 1d, 1w, 1m, 6w, or custom. This timeline will include markers that indicate the occurrence of alerts (also known as incidents).</li>
</ul>
<p><img alt="Timespans.png" src="https://cdn.qwiklabs.com/6trLDCBtLqLQZUSvT%2B83AU0V72kbpMBUxh6hEAioWZo%3D"></p>
<ul>
<li>The auto-refresh button: the circular arrows to the left of the time selections. <strong>Click the auto-refresh button to allow the screen to update as new events are received</strong>.</li>
<li>The lower portion of this dashboard contains a multiple section views of your clusters and their workloads. The interface is divided into several sections: Clusters, Namespaces, Nodes, Workloads, Kubernetes services, Pods, and Containers.</li>
</ul>
<p><img alt="GKEDashboard.png" src="https://cdn.qwiklabs.com/1lNU%2BaeP6jW%2Bg43JwbNWVgdsqI166WA5%2BdUt30y9wmk%3D"></p>
<p>Examine each section in the interface.</p>
<ol>
<li>
<p>The <strong>Clusters</strong>, <strong>Nodes</strong>, and <strong>Pods</strong> sections allow you to check the health of particular elements in the cluster. You can also use this to inspect the pods which are running on a particular node in the cluster.</p>
</li>
<li>
<p>To see the details of your cluster, click on the cluster element.</p>
</li>
<li>
<p>The <strong>Workloads</strong> section is very helpful, especially when looking for workloads which do not have services exposed.</p>
</li>
<li>
<p>The <strong>Kubernetes services</strong> section organizes the services configured in your environment by cluster, then by namespace (the administrative barrier or partition within the cluster), and then shows the various services available to users within that namespace. You can see more details on each service by clicking on their name.</p>
</li>
</ol>
<p><img alt="KubernetesServicedetails.png" src="https://cdn.qwiklabs.com/ctu8GQUBg1e6M1cpLMuIsoWJCucitRG9zTQu3GgTf%2F8%3D"></p>
<ol start="6">
<li>The <strong>Namespaces</strong> section shows the list of namespaces within the cluster. Click on the gcp-gke-monitor-test-service to view its details.</li>
</ol>
<p>The monitoring interface can provide even more detail about the deployments and pods.</p>
<ol start="7">
<li>In the <strong>Pods</strong> section click the pod beginning with <strong>gcp-gke-monitor-test</strong> to view more detail about it.</li>
</ol>
<p><img alt="PodDetails.png" src="https://cdn.qwiklabs.com/E5VxWyG7ur2I5dwBYvPl5WN8C5OS9d4h9SWSNfvNqCM%3D">
Note that you will see slightly different information if you selected the Namespaces instead of the Pod.</p>
<p>Click on the <strong>Metrics</strong> tab to see more metrics such as Memory Utilization and CPU Utilization.</p>
<p><img alt="PodMetricDetails.png" src="https://cdn.qwiklabs.com/ZvdlOVF5H%2F4E0zlbGEi%2F1JqqIf3spdFIaUgpP9AxLkg%3D"></p>
<p>Note the value of your pod's CPU utilization. That number represents the amount of CPU resources the pod is consuming relative to what it originally requested from the cluster. In this case, the pod requested 0.10 units of a CPU core, or 10% of a CPU. The graph shows that due to our CPU load generator, this pod is consuming over 3 times what it requested, or approximately 30% of a CPU core. As long as the CPU load generator remains active on the pod this number will continue to increase until it reaches a factor of 9 or 10, meaning the pod is consuming 90-100% of the CPU on the node.</p>
<p><img alt="CPUUtil2.png" src="https://cdn.qwiklabs.com/tUCRNuF367Jy7D2SjJWQg15c3h3Tiq4WqXII%2FQ1vjgg%3D"></p>
<ol>
<li>In the Pod Details window, click the <strong>Logs</strong> tab to view the log activity for the pod.</li>
</ol>
<p>This shows the log messages the pod has generated as well as a graph indicating the logging activity of the pod over time. Here you can see some of the sample logs you generated in the tool.</p>
<p><img alt="PodLogs.png" src="https://cdn.qwiklabs.com/LK8qC8SCOXAv41XQVZo8rQ7YO2Q9m1M%2FvZInBytENTk%3D"></p>
<ol start="14">
<li>
<p>Click the <strong>X</strong> in the upper right corner of the Pod Details window to return to the Monitoring interface.</p>
</li>
</ol>
<h3>Create a custom Monitoring dashboard to monitor your pods</h3>
<p>In Monitoring you can create custom dashboards to display important metrics, such as CPU utilization, container restarts, and more such as our custom metric for the number of connected users.</p>
<ol>
<li>In the navigation bar at the left of the Monitoring page, click on <strong>Metrics Explorer</strong> to begin building your dashboard.</li>
</ol>
<p><img alt="monitoring_overview.png" src="https://cdn.qwiklabs.com/XfoPJQ9abTlkOksIrvPn6M2TEELKDc5DCT4TI7kvNIM%3D"></p>
<ol start="2">
<li>Click in the text box labeled <strong>Find resource type and metric</strong>.</li>
</ol>
<p>The list will begin filtering as you type. Enter the text <code>k8s_</code> as shown below. This will filter the list to the resource types supported by the new Kubernetes Engine Monitoring tools. Click the <strong>Kubernetes Container</strong> entry.</p>
<p><img alt="9b2f4eb90a97dedc.png" src="https://cdn.qwiklabs.com/POjEE3tF2uZitETBm04c0rdTHwwQQzMwFynq0lM7JpY%3D"></p>
<ol start="3">
<li>In the list of Metrics, select the <strong>CPU request utilization</strong> entry.</li>
</ol>
<p>This is the same CPU utilization chart we saw earlier when we examined the <strong>gcp-gke-monitor-test</strong> pod, but now the chart will display that metric for all the pods.</p>
<p><img alt="4d8bc5c13dad70ee.png" src="https://cdn.qwiklabs.com/Rt%2FUOeFJ%2FNli9Q8RXTcZ7PRCLLYskvi1ftB1txdpOrA%3D"></p>
<ol start="4">
<li>Now click the <strong>Save Chart</strong> button in the upper right corner of the screen.</li>
</ol>
<p><img alt="2f382577ecada133.png" src="https://cdn.qwiklabs.com/tesGrmx5XwWqyJVlrWNHdtPImDNsz8%2BrgzZ%2BIDfMLjk%3D"></p>
<ol start="5">
<li>Give the chart a name, and then click <strong>Select Dashboard</strong>.</li>
</ol>
<p>The chart name should represent only this chart. You'll be able to give the entire dashboard a name in the next step.</p>
<p><img alt="148d587128f43df0.png" src="https://cdn.qwiklabs.com/rY8vmg3vRv%2BP6XXTo7hJlWJoglhRW1iLXRBHhW0YZYs%3D"></p>
<ol start="6">
<li>Click <strong>New Dashboard</strong>, then name your dashboard <strong>Container Dashboard</strong>, and then click <strong>Save</strong>.</li>
</ol>
<p><img alt="55eaa9f8e5ede588.png" src="https://cdn.qwiklabs.com/WWDjeYWl0KTwyWw0E9araX%2BwfBRHkn8OYr3lt0sYWKQ%3D"></p>
<ol start="7">
<li>Now you can launch your dashboard by clicking <strong>Dashboards</strong> in the navigation pane, and then selecting the name of your new dashboard.</li>
</ol>
<p><img alt="ed607dfa09abffb3.png" src="https://cdn.qwiklabs.com/hXdGv7n0c79hS8IsHSZECraFW7e7T48mrcagwUkJ%2FtY%3D"></p>
<p>You now have a dashboard showing a single chart with a standard Monitoring metric. Next you will create a chart for our custom Monitoring metric, and then add it to this dashboard.</p>
<ol start="8">
<li>
<p>Click <strong>Metrics explorer</strong>.</p>
</li>
<li>
<p>Click the resource type box and type the text <strong>custom</strong> to filter the list to the custom metric we added at the beginning of this lab exercise. Select <strong>Web App - Active Users</strong>.</p>
</li>
</ol>
<p><img alt="2de13396056d04e5.png" src="https://cdn.qwiklabs.com/ynUu85GVrkeGH1UH6dPA05DZ1oPyzNoU2n8M7b7CH7U%3D"></p>
<ol start="10">
<li>
<p>For resources, select <strong>Kubernetes Pod</strong>.</p>
</li>
<li>
<p>Click on <strong>Save Chart</strong>.</p>
</li>
</ol>
<p><img alt="save_chart.png" src="https://cdn.qwiklabs.com/XDfyVWRPIVAJw7SQcb01ktESLIjFdkXrwmQCQHwwaA8%3D"></p>
<ol start="12">
<li>
<p>Give the new chart a name, such as <strong>Active Users</strong> and then select <strong>Container Dashboard</strong> from the dashboards dropdown.</p>
</li>
<li>
<p>At the top of the dashboard, click the gear icon to display the settings menu, and then click <strong>Show All Legends</strong> to display the text under each chart.</p>
</li>
</ol>
<p><img alt="show_legends.png" src="https://cdn.qwiklabs.com/MysyD1cckP3gYO5iNYyS67tgy5bE04iPgsFw1GyIvuo%3D"></p>
<ol start="14">
<li>Click the three vertical bars next to the word <strong>Value</strong> at the right of each chart.</li>
</ol>
<p>This displays a popup which contains the various labels which were included in the timeSeries data sent by our application server. You can use this information to filter or even aggregate the data in the chart.</p>
<ol start="15">
<li>Select all the options and then click <strong>SAVE</strong> to save the settings.</li>
</ol>
<p><img alt="container_dashboard.png" src="https://cdn.qwiklabs.com/1s1VIJLyCnGnNO%2FPlB7AmVw4XVWpuqwUmqqIpZa%2BLO0%3D"></p>
<h2 id="step7">Task 4. Creating Alerts with Kubernetes Engine Monitoring</h2>
<p>In this task you will configure an alert within Kubernetes Engine Monitoring and then use the dashboard to identify and respond to the incident.</p>
<h3>Create an Alert Policy</h3>
<p>You will now create an alert policy to detect high CPU utilization among the containers.</p>
<ol>
<li>In the Monitoring page, click <strong>Alerting</strong>, and then click <strong>Create Policy</strong>.</li>
</ol>
<p><img alt="f59742108f2aa82c.png" src="https://cdn.qwiklabs.com/OqkIX9PuWQrJKTQMMRO%2BeKzWdZvjpc71uz4iWP%2FNflg%3D"></p>
<ol start="2">
<li>Click <strong>Add Condition</strong>.</li>
</ol>
<p><img alt="1763f03d110e77de.png" src="https://cdn.qwiklabs.com/Lv3%2F2EbJU20%2Bk6NR6WN%2F%2BDc5ULKsCckCDgJPpY5bVW8%3D"></p>
<ol start="3">
<li>In the resource type text box, enter the text <code>k8s_container</code>, and then click <strong>Kubernetes Container</strong>.</li>
</ol>
<p><img alt="68735e0f5a7aa094.png" src="https://cdn.qwiklabs.com/bwPo8ZV%2BQmh4X%2BSyhEdDL6%2B7gAF5aMggsVBw4rBT9DU%3D"></p>
<ol start="4">
<li>In the metric selection box, click <strong>CPU request utilization</strong>.</li>
</ol>
<p><img alt="41ffd7c79e8a94ef.png" src="https://cdn.qwiklabs.com/sT5gXt1XBqtzErH510FMpPNYAz0HKPnyBm8yH99KT8U%3D"></p>
<ol start="5">
<li>
<p>Name the condition <code>CPU request utilization</code>, and set the <strong>Condition</strong> to <strong>is above</strong> with a <strong>Threshold</strong> of <strong>99%</strong>.</p>
</li>
<li>
<p>Click the <strong>Add</strong> button in the lower left corner of the window.</p>
</li>
</ol>
<p><img alt="3a49f111d0de6dd.png" src="https://cdn.qwiklabs.com/%2FwxqBC%2B1Q6Xn4N6%2BiBmBhEMSZUA4wuotSrle5KRO558%3D"></p>
<ol start="7">
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>Name the policy as <strong>CPU Utilization High</strong>.</p>
</li>
<li>
<p>Click the <strong>Save</strong> button at the bottom of the screen.</p>
</li>
</ol>
<p>Click <em>Check my progress</em> to verify the objective.
<ql-activity-tracking step="3">
Creating Alerts with Kubernetes Engine Monitoring
</ql-activity-tracking></p>
<h3>Respond to an Incident</h3>
<p>Now you will return to the monitoring dashboard where an incident is being reported on one of the containers.</p>
<ol>
<li>In the Monitoring page, click <strong>Resources dashboard</strong>, and then click <strong>GKE</strong>.</li>
</ol>
<p><img alt="resouces_gke.png" src="https://cdn.qwiklabs.com/EmcfhuvOuA6HEWYdoeteaQA6FNmKum4lzkxkIwS%2Fyd4%3D"></p>
<ol start="2">
<li>
<p>On the Kubernetes Engine Monitoring dashboard you should see an incident reported on the cluster. Click the <strong>Clusters</strong> tab and expand <strong>standard-cluster-1</strong>.</p>
</li>
<li>
<p>It will take a minute or two to register the alert and you may need to refresh the page to see the alert.</p>
</li>
</ol>
<p><img alt="default_namespace.png" src="https://cdn.qwiklabs.com/5kbfjppiskO%2F6X9pFpd3%2Fd%2Fy8wWJpfXBv1ucxi4DpzI%3D"></p>
<ol start="4">
<li>Go to <strong>Alerting</strong> page and then click the alert name <strong>CPU Utilization High</strong> to view additional details.</li>
</ol>
<p><img alt="7de98f6bef0e4935.png" src="https://cdn.qwiklabs.com/FbG38rulZSU%2FzYI1IEp45ibOlc17Ca6aOK37Iw49yXA%3D"></p>
<ol start="5">
<li>Open the incident and click on <strong>Acknowledge Incident</strong>. The incident status now shows Acknowledged, but that doesn't solve the problem. You need to fix the root cause of the problem; the CPU Load Generator container.</li>
</ol>
<p><img alt="37275e5bcbddc5f3.png" src="https://cdn.qwiklabs.com/e%2FQGDIIAx%2FHRq9OW418%2Btq%2FWdAInD79ug3cv5xVmNQQ%3D"></p>
<ol start="6">
<li>Open the web interface for the GCP-GKE-Monitor-Test tool, and in the <strong>Generate CPU Load</strong> section click the <strong>Stop CPU Load</strong> button to resolve the issue by stopping the CPU Load Generator.</li>
</ol>
<p><img alt="23b8c30ba8fc8ddf.png" src="https://cdn.qwiklabs.com/HSIQveAxKhqlWQWKzEmJRefBqBoFNF2UkAefwLg%2BMSk%3D"></p>
<ol start="7">
<li>You may now close the GCP-GKE-Monitor-Test web browser window.</li>
</ol>
<h2 id="step8">End your lab</h2>
<p>When you have completed your lab, click <strong>End Lab</strong>. Qwiklabs removes the resources you’ve used and cleans the account for you.</p>
<p>You will be given an opportunity to rate the lab experience. Select the applicable number of stars, type a comment, and then click <strong>Submit</strong>.</p>
<p>The number of stars indicates the following:</p>
<ul>
<li>1 star = Very dissatisfied</li>
<li>2 stars = Dissatisfied</li>
<li>3 stars = Neutral</li>
<li>4 stars = Satisfied</li>
<li>5 stars = Very satisfied</li>
</ul>
<p>You can close the dialog box if you don't want to provide feedback.</p>
<p>For feedback, suggestions, or corrections, please use the <strong>Support</strong> tab.</p>

<p>Copyright 2021 Google LLC All rights reserved. Google and the Google logo are trademarks of Google LLC. All other company and product names may be trademarks of the respective companies with which they are associated.</p>



</div>
</div>


<div class='hidden js-end-lab-button-container lab-content__end-lab-button'>
<ql-lab-control-button class='js-end-lab-button' running></ql-lab-control-button>
</div>
<!-- / TODO: Move recommendations into the end lab modal -->
</ql-drawer-content>
<ql-drawer end id='outline-drawer' open slot='drawer' width='320'>
<div class='js-lab-content-outline lab-content__outline'>
<a href='#step1'>Overview</a><a href='#step2'>Objectives</a><a href='#step3'>Task 0. Lab Setup</a><a href='#step4'>Task 1. Using Kubernetes Engine Monitoring</a><a href='#step5'>Task 2: Using the GCP-GKE-Monitor-Test application</a><a href='#step6'>Task 3. Using Kubernetes Engine Monitoring</a><a href='#step7'>Task 4. Creating Alerts with Kubernetes Engine Monitoring</a><a href='#step8'>End your lab</a>
</div>
</ql-drawer>
</ql-drawer-container>
</ql-drawer-content>
</ql-drawer-container>
<div class='lab-introduction js-lab-introduction is-hidden'>
<div class='lab-introduction__inner'>
<h1 class='headline-1'>Welcome to Your First Lab!</h1>
<ql-icon-button class='js-skip-button'>close</ql-icon-button>
<div class='lab-introduction__video'>
<iframe allow='autoplay; encrypted-media' allowfullscreen frameborder='0' id='lab-introduction' src='https://www.youtube.com/embed/yF7EDXKTmoQ?enablejsapi=1&amp;rel=0&amp;showinfo=0'></iframe>
</div>
<a class='js-skip-button button button--outline'>Skip this video</a>
</div>
</div>



</div>
</main>


<div class='modal fade' id='lab-details-modal'>
<div class='modal-container'>
<div class='mdl-shadow--24dp modal-content'>
<div class='modal-body'>
<p class='l-mbm'>
Architecting with Google Kubernetes Engine: Configuring Kubernetes Engine native Monitoring and Logging
</p>
<p class='small-label l-mbs'>
<strong>
Duration:
</strong>
0m setup
&middot;
60m access
&middot;
60m completion
</p>
<p class='small-label l-mbs'>
<span><strong>Levels: </strong>fundamental</span>
</p>
<p class='small-label'>
<strong>
Permalink:
</strong>
<a href="https://googlecoursera.qwiklabs.com/catalog_lab/2307">https://googlecoursera.qwiklabs.com/catalog_lab/2307</a>
</p>
</div>
<div class='modal-actions'>
<a class='button button--text' data-dismiss='modal'>
Got It
</a>
</div>


</div>
</div>
<iframe class='l-ie-iframe-fix'></iframe>
</div>
<div class='modal fade' id='lab-review-modal'>
<div class='modal-container'>
<div class='mdl-shadow--24dp modal-content'>
<form class="simple_form js-lab-review-form" id="edit_lab_review_12004557" action="/lab_reviews/12004557" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="_method" value="patch" /><div class='modal-body'>
<p class='label'>
How satisfied are you with this lab?*
</p>
<div class='rateit js-rateit' data-rateit-max='5' data-rateit-min='0' data-rateit-resetable='false' data-rateit-step='1' data-rateit-value='5'></div>
<div class='l-mtm'>

<div class="control-group hidden lab_review_user_id"><div class="controls"><input class="hidden" type="hidden" value="3894861" name="lab_review[user_id]" id="lab_review_user_id" /></div></div>
<div class="control-group hidden lab_review_classroom_id"><div class="controls"><input class="hidden" type="hidden" name="lab_review[classroom_id]" id="lab_review_classroom_id" /></div></div>
<div class="control-group hidden lab_review_lab_id"><div class="controls"><input class="hidden" type="hidden" value="2307" name="lab_review[lab_id]" id="lab_review_lab_id" /></div></div>
<div class="control-group hidden lab_review_focus_id"><div class="controls"><input class="hidden" type="hidden" name="lab_review[focus_id]" id="lab_review_focus_id" /></div></div>
<div class="control-group hidden lab_review_rating"><div class="controls"><input class="hidden js-rating-input" type="hidden" value="2" name="lab_review[rating]" id="lab_review_rating" /></div></div>
<div class="control-group text optional lab_review_comment"><label class="text optional control-label" for="lab_review_comment">Comment</label><div class="controls"><textarea class="text optional" name="lab_review[comment]" id="lab_review_comment">
</textarea></div></div>
</div>
</div>
<div class='modal-actions'>
<a class='button button--text' data-dismiss='modal'>
Cancel
</a>
<input type="submit" name="commit" value="Submit" disabled="disabled" id="submit" data-disabled="false" class="button" data-disable-with="Submit" />
</div>
</form>

</div>
</div>
<iframe class='l-ie-iframe-fix'></iframe>
</div>


<script>
  $( function() {
    ql.initMaterialInputs();
    initChosen();
    initSearch();
    initTabs();
    ql.list.init();
    ql.favoriting.init();
    ql.header.myAccount.init();
    initTooltips();
    ql.autocomplete.init();
    ql.modals.init();
    ql.toggleButtons.init();
    ql.analytics.init();
    ql.labControlPanel.addRecaptchaErrorHandler();
  initLabContent();
  ql.labOutline.links.init();
  initLabReviewModal();
  ql.labAssessment.init();
  ql.labIntroduction.init( true );
  ql.labData.init();
  initLabTranslations( {"are_you_sure":"All done? If you end this lab, you will lose all your work. You may not be able to restart the lab if there is a quota limit. Are you sure you want to end this lab?\n","in_progress":"*In Progress*","ending":"*Ending*","starting":"*Starting, please wait*","end_concurrent_labs":"Sorry, you can only run one lab at a time. To start this lab, please confirm that you want all of your existing labs to end.\n","copied":"Copied","no_resource":"Error retrieving resource.","no_support":"No Support","mac_press":"Press ⌘-C to copy","thanks_review":"Thanks for reviewing this lab.","windows_press":"Press Ctrl-C to copy","days":"days"} );
  ql.labRun.init();
  ql.chat.init();
  ql.initHeader();
  ql.navigation.init();
  ql.navPanel.init();
  ql.navigation.init();
  
  });
</script>

</body>
</html>

