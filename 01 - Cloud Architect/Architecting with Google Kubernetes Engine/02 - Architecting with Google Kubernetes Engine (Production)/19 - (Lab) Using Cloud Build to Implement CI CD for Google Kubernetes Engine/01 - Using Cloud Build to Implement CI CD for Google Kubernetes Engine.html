
<!DOCTYPE html>
<html lang='en'>
<head>
<title>CI/CD for Google Kubernetes Engine using Cloud Build | Qwiklabs</title>
<script>
//<![CDATA[
window.gon={};gon.current_user={"firstname":"DANIEL","lastname":"ENRIQUE SANDOVAL SANCHEZ","fullname":"DANIEL ENRIQUE SANDOVAL SANCHEZ","company":"Coursera","email":"desandovals@liverpool.com.mx","origin":"googlecoursera-run, lti-coursera","subscriptions":0,"id":"40414ff5fc280f833d9acca966912f93","qlCreatedAt":"2020-11-17 20:45:59 UTC","optIn":null,"current_organization_id":null,"current_organization_role":null};gon.segment="j4Im8pqIko0Lxq4wVVZWMPMM0EroHUvb";gon.deployment="googlecoursera-run";gon.content={"type":"Lab","id":3104,"name":"CI/CD for Google Kubernetes Engine using Cloud Build"};
//]]>
</script>
<script>
  dataLayer = [
    {user: gon.current_user},
    {content: gon.content}
  ];
</script>
<script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer',"GTM-TQR88QK");
</script>
<script>
  EVENT_SOURCE_BASE_URL = "https://googlecoursera-run.qwiklabs.com/nchan-sub?id=";
</script>
<script src="https://cdn.qwiklabs.com/assets/hallofmirrors/polyfills/webcomponents-loader-408088dc333247a761de5f2b2a4ba1cabd2bc36579f83ba92a559eb3682a9b77.js"></script>
<script src="https://cdn.qwiklabs.com/assets/vendor-45d462772c30000424907184f70c7157e95fb6227698d1671c5051818a6f60d8.js"></script>
<script src="https://cdn.qwiklabs.com/assets/application-6874b164d8346f46605fc772a6f7375a39626ffc9f6d168e23a3a8c40bb6fd28.js"></script>
<script src="https://cdn.qwiklabs.com/assets/hallofmirrors/hallofmirrors-b7ff781d00ceebdf75589f58475cea695bafd8d5cc1f3eb4baf6122ed4a4b736.js"></script>
<!--[if lt IE 9]>
<script src='http://html5shim.googlecode.com/svn/trunk/html5.js' type='text/javascript'></script>
<![endif]-->
<!--[endif]>  <![endif]-->
<script type='application/ld+json'>
{
  "@context": "http://schema.org",
  "@type": "WebSite",
  "url": "https://www.qwiklabs.com/",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://www.qwiklabs.com/catalog?keywords={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>
<script id='ze-snippet' src='https://static.zdassets.com/ekr/snippet.js?key=511e4158-0aec-4e3c-b2e6-4daa1769f51e'></script>


<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="Wu1/EGiEqQSzD2XtimPCCtxdxnxr8Jn33mXLKm/ZJ4fOCSo+t6tZa9HPFlJDRdgVwHkbmwD33VYrkCG/1ZmnPQ==" />
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=0' name='viewport'>
<meta content='1rRsY0INj8RvwB5EF5pwdxt2A2P9aDgAlsICaJ0d5w0' name='google-site-verification'>
<meta content='#3681E4' property='msapplication-TileColor'>
<meta content='/favicon-144.png' property='msapplication-TileImage'>
<meta content='[{&quot;id&quot;:&quot;recaptcha_experiment&quot;,&quot;optimize_id&quot;:&quot;dpViOcLkT3qS4TvL2mRojA&quot;,&quot;title&quot;:&quot;No Recaptcha shown for trusted users&quot;,&quot;variant_index&quot;:0,&quot;variant&quot;:&quot;original&quot;}]' name='active-experiments'>
<meta content='{&quot;userId&quot;:3894861}' name='help-api-product-data'>
<meta content='In this lab, you will explore the concept of GitOps in the context of Continuous Integration/Continuous Deployment (CI/CD) pipelines implemented with Cloud Build for applications running on Google Kubernetes Engine. 
' name='description'>
<meta content='Qwiklabs' name='author'>
<meta content='CI/CD for Google Kubernetes Engine using Cloud Build | Qwiklabs' property='og:title'>
<meta content='website' property='og:type'>
<meta content='/favicon-144.png' property='og:image'>
<meta content='Qwiklabs' property='og:site_name'>
<meta content='In this lab, you will explore the concept of GitOps in the context of Continuous Integration/Continuous Deployment (CI/CD) pipelines implemented with Cloud Build for applications running on Google Kubernetes Engine. 
' property='og:description'>
<meta content='/qwiklabs_logo_900x887.png' property='og:logo' size='900x887'>
<meta content='/qwiklabs_logo_994x187.png' property='og:logo' size='994x187'>


<link href='/favicon-32.png' rel='shortcut icon'>
<link color='#3681E4' href='/favicon-svg.svg' rel='mask-icon'>
<link href='/favicon-180.png' rel='apple-touch-icon-precomposed'>



<link rel="stylesheet" media="screen" href="https://fonts.googleapis.com/css?family=Oswald:400|Roboto+Mono:400,700|Roboto:300,400,500,700|Google+Sans:300,400,500,700|Google+Sans+Display:400|Material+Icons|Google+Material+Icons" />


<link rel="stylesheet" media="all" href="https://cdn.qwiklabs.com/assets/application-cf67fd00dd904ecce1e24779d7504aefc7fbd5d00696246fa80212743a81bf07.css" />



</head>
<body class='lab-show l-full no-nav application-new focuses focuses-show lab-show l-full no-nav '>
<noscript>
<iframe height='0' src='https://www.googletagmanager.com/ns.html?id=GTM-TQR88QK' style='display:none;visibility:hidden;' width='0'></iframe>
</noscript>
<span class='hidden' id='flash-sibling-before'></span>

<div class='header-container'>
<div class='header'>
<ql-icon-button class='js-nav-toggle header__nav-panel-button l-mrm'>menu</ql-icon-button>
<div class='header__title'>
<ql-icon-button label="Back" href="https://www.coursera.org/" id="2a8cce13cbf5daa0" target="_self">arrow_back</ql-icon-button><div class="mdl-tooltip" data-mdl-for="2a8cce13cbf5daa0">Back</div>

<h1 class='headline-5'>
CI/CD for Google Kubernetes Engine using Cloud Build
</h1>
</div>
<div class='header__actions'>
<ql-icon-button class='header__button--search js-header-search-bar-button'>search</ql-icon-button>
<ql-icon-button id='control-panel-target' style='display: none;'>
dashboard
</ql-icon-button>
<ql-menu for='control-panel-target' id='control-panel-menu'></ql-menu>

<ql-icon-button id='help-menu-button'>help</ql-icon-button>
<div class='mdl-tooltip js-tooltip' data-mdl-for='help-menu-button'>
Help
</div>
<ql-menu for='help-menu-button' id='help-menu'>
<ql-menu-item>
<ql-help context='lab' data-analytics-action='opened_help' data-analytics-label='lab' productdata='{&quot;userId&quot;:3894861}'>
Help Center
</ql-help>
</ql-menu-item>
<ql-menu-item>
<a target="_blank" class="ql-body-1" href="https://support.google.com/qwiklabs/contact/contact_us">Email support</a>
</ql-menu-item>
<ql-menu-item>
<a class='ql-body-1' onClick='ql.chat.open()'>Chat support</a>
</ql-menu-item>
</ql-menu>

<ql-icon-button id='language'>language</ql-icon-button>
<div class='mdl-menu mdl-menu__bottom-right mdl-js-menu elevation-3' for='language'>
<a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="ar" href="/focuses/15531768?locale=ar&amp;parent=lti_session">العربية‬‎
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="de" href="/focuses/15531768?locale=de&amp;parent=lti_session">Deutsch
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="en" href="/focuses/15531768?locale=en&amp;parent=lti_session">English
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="es" href="/focuses/15531768?locale=es&amp;parent=lti_session">español (Latinoamérica)
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="fr" href="/focuses/15531768?locale=fr&amp;parent=lti_session">français
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="id" href="/focuses/15531768?locale=id&amp;parent=lti_session">bahasa Indonesia
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="it" href="/focuses/15531768?locale=it&amp;parent=lti_session">Italiano
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="ja" href="/focuses/15531768?locale=ja&amp;parent=lti_session">日本語
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="ko" href="/focuses/15531768?locale=ko&amp;parent=lti_session">한국어
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="pl" href="/focuses/15531768?locale=pl&amp;parent=lti_session">Polski
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="pt_BR" href="/focuses/15531768?locale=pt_BR&amp;parent=lti_session">português (Brasil)
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="pt_PT" href="/focuses/15531768?locale=pt_PT&amp;parent=lti_session">português (Portugal)
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="ru" href="/focuses/15531768?locale=ru&amp;parent=lti_session">русский
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="tr" href="/focuses/15531768?locale=tr&amp;parent=lti_session">Türkçe
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="zh" href="/focuses/15531768?locale=zh&amp;parent=lti_session">简体中文
</a><a class="mdl-menu__item locale-link" data-analytics-action="changed_locale" data-analytics-label="zh_TW" href="/focuses/15531768?locale=zh_TW&amp;parent=lti_session">繁體中文
</a></div>
<button class='icon-button' id='my_account'>
<ql-avatar></ql-avatar>
</button>
<ql-menu for='my_account' open>
<div class='my-account-menu'>
<ql-avatar class='l-mtl l-mbl' size='120'></ql-avatar>
<div class='my-account-menu__user-info l-mbl'>
<h4 class='ql-subhead-1'>DANIEL ENRIQUE SANDOVAL SANCHEZ</h4>
<p class='ql-body-2 text--light'>desandovals@liverpool.com.mx</p>
<p class='ql-body-2 text--light'>
</p>
<a class="text--green ql-subhead-2" href="/my_account/payments"><ql-chip positive>
0 Credits
</ql-chip>
</a></div>
<div class='buttons l-mbl'>
<a class="button button--hairline" id="settings" href="/my_account/profile">Settings</a>
</div>
<hr>
<ql-button data-analytics-action='clicked_sign_out' href='/users/sign_out' method='delete'>
Sign Out
</ql-button>
<div class='privacy l-mtl'>
<a class="ql-caption text--light" href="/privacy_policy">Privacy</a>
<span class='ql-caption text--light l-mls l-mrs'>&middot;</span>
<a class="ql-caption text--light" href="/terms_of_service">Terms</a>
</div>
</div>
</ql-menu>

</div>
</div>
<div class='header__search-bar js-header-search-bar'>
<form class="js-search-form-mobile" onsubmit="ql.searchFilter(); return false;" action="/searches/elasticsearch" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="mBh1clOTDb8EQJI2yYIYoSAGMKeE6YS0eGqOWROYo3UM/CBcjLz90GaA4YkApAK+PCLtQO/uwBWNn2TMqdgjzw==" />
<input type="text" name="keywords" id="keywords" placeholder="Search" maxlength="255" aria-label="catalog search bar" />
</form>

<ql-icon-button class='js-close-search-bar'>close</ql-icon-button>
</div>
</div>

<nav class='nav-bar'>
<a class="nav-bar__item js-navigation-button" href="/"><ql-icon class='nav-bar__item__icon'>
home
</ql-icon>
<span class='nav-bar__item__label'>
Home
</span>
</a>
<a class="nav-bar__item js-navigation-button" href="/catalog"><ql-icon class='nav-bar__item__icon'>
school
</ql-icon>
<span class='nav-bar__item__label'>
Catalog
</span>
</a>
<a class="nav-bar__item js-navigation-button" href="/my_learning"><ql-icon class='nav-bar__item__icon'>
event_note
</ql-icon>
<span class='nav-bar__item__label'>
My Learning
</span>
</a>
</nav>

<nav class='nav-panel js-nav-panel'>
<div class='nav-panel__logo'>
<div class='logo logo--blue'></div>
</div>
<a title="Home" tabindex="-1" class="nav-panel__item js-navigation-button" href="/"><ql-icon class='nav-panel__item__icon'>
home
</ql-icon>
<div class='nav-panel__item__label'>
Home
</div>
</a>
<a title="Catalog" tabindex="-1" class="nav-panel__item js-navigation-button" href="/catalog"><ql-icon class='nav-panel__item__icon'>
school
</ql-icon>
<div class='nav-panel__item__label'>
Catalog
</div>
</a>
<a title="My Learning" tabindex="-1" class="nav-panel__item js-navigation-button" href="/my_learning"><ql-icon class='nav-panel__item__icon'>
event_note
</ql-icon>
<div class='nav-panel__item__label'>
My Learning
</div>
</a>
<div class='nav-panel__spacer'></div>
<a title="Profile" tabindex="-1" class="nav-panel__item js-navigation-button" href="/my_account/profile"><ql-icon class='nav-panel__item__icon'>
account_circle
</ql-icon>
<div class='nav-panel__item__label'>
Profile
</div>
</a>
<a title="Credits &amp; Subscriptions" tabindex="-1" class="nav-panel__item js-navigation-button" href="/my_account/credits"><ql-icon class='nav-panel__item__icon'>
money
</ql-icon>
<div class='nav-panel__item__label'>
Credits &amp; Subscriptions
</div>
</a>
<a title="Security" tabindex="-1" class="nav-panel__item js-navigation-button" href="/my_account/security"><ql-icon class='nav-panel__item__icon'>
security
</ql-icon>
<div class='nav-panel__item__label'>
Security
</div>
</a>
<div class='nav-panel__spacer'></div>
<a class="nav-panel__item" tabindex="-1" href="#"><ql-help>
<div class='nav-panel__help-item'>
<ql-icon class='nav-panel__item__icon'>help</ql-icon>
<div class='nav-panel__item__label'>
Help
</div>
</div>
</ql-help>
</a><div class='nav-panel__small-links'>
<a tabindex="-1" href="/privacy_policy">Privacy</a>
<a tabindex="-1" href="/terms_of_service">Terms</a>
</div>
</nav>
<div class='nav-panel__overlay js-nav-toggle'></div>

<main class='js-main'>
<div class='l-main-wrapper' id='main-wrapper'>







<div class='lab-assessment__tab js-open-lab-assessment-panel'>
<h6 class='js-lab-assessment-total-score'>
&mdash;/80
</h6>
</div>
<div class='lab-assessment__panel js-lab-assessment-panel'>
<div class='lab-assessment__panel__header'>
<h4>Checkpoints</h4>
<ql-icon-button class='js-close-lab-assessment-panel'>arrow_forward</ql-icon-button>
</div>
<div class='lab-assessment__step'>
<p class='lab-assessment__step__title'>
Initialize Your Lab
</p>
<div class='lab-assessment__step__action'>
<a class='button js-show-run-step-button' step_no='1'>
Check my progress
</a>
<p class='lab-assessment__step__score'>
<span class='js-assessment-step-score-1'>
</span>
/ 10
</p>
</div>
</div>

<div class='lab-assessment__step'>
<p class='lab-assessment__step__title'>
Create the Git repositories in Cloud Source Repositories
</p>
<div class='lab-assessment__step__action'>
<a class='button js-show-run-step-button' step_no='2'>
Check my progress
</a>
<p class='lab-assessment__step__score'>
<span class='js-assessment-step-score-2'>
</span>
/ 10
</p>
</div>
</div>

<div class='lab-assessment__step'>
<p class='lab-assessment__step__title'>
Create a container image with Cloud Build
</p>
<div class='lab-assessment__step__action'>
<a class='button js-show-run-step-button' step_no='3'>
Check my progress
</a>
<p class='lab-assessment__step__score'>
<span class='js-assessment-step-score-3'>
</span>
/ 10
</p>
</div>
</div>

<div class='lab-assessment__step'>
<p class='lab-assessment__step__title'>
Create the Continuous Integration (CI) Pipeline
</p>
<div class='lab-assessment__step__action'>
<a class='button js-show-run-step-button' step_no='4'>
Check my progress
</a>
<p class='lab-assessment__step__score'>
<span class='js-assessment-step-score-4'>
</span>
/ 10
</p>
</div>
</div>

<div class='lab-assessment__step'>
<p class='lab-assessment__step__title'>
Grant Kubernetes Engine Developer and Source Repository Writer IAM role to cloud build
</p>
<div class='lab-assessment__step__action'>
<a class='button js-show-run-step-button' step_no='5'>
Check my progress
</a>
<p class='lab-assessment__step__score'>
<span class='js-assessment-step-score-5'>
</span>
/ 10
</p>
</div>
</div>

<div class='lab-assessment__step'>
<p class='lab-assessment__step__title'>
Create the trigger for the continuous delivery pipeline
</p>
<div class='lab-assessment__step__action'>
<a class='button js-show-run-step-button' step_no='6'>
Check my progress
</a>
<p class='lab-assessment__step__score'>
<span class='js-assessment-step-score-6'>
</span>
/ 10
</p>
</div>
</div>

<div class='lab-assessment__step'>
<p class='lab-assessment__step__title'>
Test the complete pipeline
</p>
<div class='lab-assessment__step__action'>
<a class='button js-show-run-step-button' step_no='7'>
Check my progress
</a>
<p class='lab-assessment__step__score'>
<span class='js-assessment-step-score-7'>
</span>
/ 10
</p>
</div>
</div>

<div class='lab-assessment__step'>
<p class='lab-assessment__step__title'>
Test the rollback
</p>
<div class='lab-assessment__step__action'>
<a class='button js-show-run-step-button' step_no='8'>
Check my progress
</a>
<p class='lab-assessment__step__score'>
<span class='js-assessment-step-score-8'>
</span>
/ 10
</p>
</div>
</div>

</div>
<ql-drawer-container class='js-lab-state' data-analytics-payload='{&quot;label&quot;:&quot;CI/CD for Google Kubernetes Engine using Cloud Build&quot;,&quot;lab_name&quot;:&quot;CI/CD for Google Kubernetes Engine using Cloud Build&quot;,&quot;classroom_name&quot;:null,&quot;deployment&quot;:&quot;googlecoursera-run&quot;}' data-focus-id='15531768' data-lab-billing-limit='0.0' data-lab-duration='5400' data-parent='lti_session' data-recaptcha-enabled id='lab-container'>
<ql-drawer id='terminal-drawer' slot='drawer' style='width: calc(100% - 480px)'>
<iframe allow='clipboard-read' class='terminal' id='embedded-resource'></iframe>
</ql-drawer>
<ql-drawer-content class='js-lab-wrapper' id='lab-content' slot='drawer-content'>
<ql-drawer-container id='lab-content-container'>
<ql-drawer id='control-panel-drawer' open slot='drawer' width='320'>
<ql-lab-control-panel class='ql-lab-control-panel__max-height control-panel js-lab-control-panel' connectionFiles='[]' labControlButton='{&quot;disabled&quot;:false,&quot;pending&quot;:false,&quot;running&quot;:false}' labDetails='[]' labTimer='{&quot;ticking&quot;:false,&quot;secondsRemaining&quot;:5400}' studentResources='[]'>
<script src="https://www.recaptcha.net/recaptcha/api.js?render=6LeVI8IUAAAAAJNdox5eTkYrw9SbvhZ1TFyv3iHr"   ></script>
        <script>
          // Define function so that we can call it again later if we need to reset it
          // This executes reCAPTCHA and then calls our callback.
          function executeRecaptchaForStartLab() {
            grecaptcha.ready(function() {
              grecaptcha.execute('6LeVI8IUAAAAAJNdox5eTkYrw9SbvhZ1TFyv3iHr', {action: 'start_lab'}).then(function(token) {
                setInputWithRecaptchaResponseTokenForStartLab('g-recaptcha-response-data-start-lab', token)
              });
            });
          };
          // Invoke immediately
          executeRecaptchaForStartLab()

          // Async variant so you can await this function from another async function (no need for
          // an explicit callback function then!)
          // Returns a Promise that resolves with the response token.
          async function executeRecaptchaForStartLabAsync() {
            return new Promise((resolve, reject) => {
              grecaptcha.ready(async function() {
                resolve(await grecaptcha.execute('6LeVI8IUAAAAAJNdox5eTkYrw9SbvhZ1TFyv3iHr', {action: 'start_lab'}))
              });
            })
          };

                    var setInputWithRecaptchaResponseTokenForStartLab = function(id, token) {
            var element = document.getElementById(id);
            element.value = token;
          }

        </script>
<input type="hidden" name="g-recaptcha-response-data[start_lab]" id="g-recaptcha-response-data-start-lab" data-sitekey="6LeVI8IUAAAAAJNdox5eTkYrw9SbvhZ1TFyv3iHr" class="g-recaptcha g-recaptcha-response "/>

<div class='hidden' id='recaptcha-v2-start-lab' slot='recaptcha'>
<script src="https://www.recaptcha.net/recaptcha/api.js" async defer ></script>
<div data-sitekey="6LeOI8IUAAAAAPkHlMAE9NReCD_1WD81iYlBlCnV" data-callback="recaptchaComplete" data-expired-callback="expireV2Token" class="g-recaptcha "></div>
          <noscript>
            <div>
              <div style="width: 302px; height: 422px; position: relative;">
                <div style="width: 302px; height: 422px; position: absolute;">
                  <iframe
                    src="https://www.recaptcha.net/recaptcha/api/fallback?k=6LeOI8IUAAAAAPkHlMAE9NReCD_1WD81iYlBlCnV"
                    name="ReCAPTCHA"
                    style="width: 302px; height: 422px; border-style: none; border: 0; overflow: hidden;">
                  </iframe>
                </div>
              </div>
              <div style="width: 300px; height: 60px; border-style: none;
                bottom: 12px; left: 25px; margin: 0px; padding: 0px; right: 25px;
                background: #f9f9f9; border: 1px solid #c1c1c1; border-radius: 3px;">
                <textarea id="g-recaptcha-response" name="g-recaptcha-response"
                  class="g-recaptcha-response"
                  style="width: 250px; height: 40px; border: 1px solid #c1c1c1;
                  margin: 10px 25px; padding: 0px; resize: none;">
                </textarea>
              </div>
            </div>
          </noscript>

</div>
</ql-lab-control-panel>
</ql-drawer>
<ql-drawer-content id='lab-instructions' slot='drawer-content'>
<div class='alert alert--fake js-alert'>
<p class='alert__message js-alert-message'></p>
<a class='alert__close js-alert-close'>
<i class='fa fa-times'></i>
</a>
<iframe class='l-ie-iframe-fix'></iframe>
</div>
<div class='js-lab-content lab-content__renderable-instructions'>
<div class='lab-preamble'>
<h1 class='lab-preamble__title'>
CI/CD for Google Kubernetes Engine using Cloud Build
</h1>
<div class='lab-preamble__details subtitle-headline-1'>
<span>1 hour 30 minutes</span>
<span>Free</span>
<div class='lab__rating'>
<a href="/focuses/15531768/reviews?parent=lti_session"><div class='rateit' data-rateit-readonly='true' data-rateit-value='4.3917'></div>

</a><a data-target='#lab-review-modal' data-toggle='modal'>
Rate Lab
</a>
</div>
</div>
</div>

<div class='js-markdown-instructions markdown-lab-instructions' id='markdown-lab-instructions'>



<h2 id="step1">Overview</h2>
<p>In this lab, you create a CI/CD pipeline that automatically builds a container image from committed code, stores the image in Container Registry, updates a Kubernetes manifest in a Git repository, and deploys the application to Google Kubernetes Engine using that manifest.</p>
<p><img alt="gitops-tutorial-pipeline-architecture.png" src="https://cdn.qwiklabs.com/oLcxfKkcwsLFq93Ryg2ZOPQEadyUGx9ZdMmkSl3ASpY%3D"></p>
<p>For this lab you will create 2 Git repositories:</p>
<ul>
<li>app repository: contains the source code of the application itself</li>
<li>env repository: contains the manifests for the Kubernetes Deployment</li>
</ul>
<p>When you push a change to the <strong>app repository</strong>, the Cloud Build pipeline runs tests, builds a container image, and pushes it to Container Registry. After pushing the image, Cloud Build updates the Deployment manifest and pushes it to the <strong>env repository</strong>. This triggers another Cloud Build pipeline that applies the manifest to the GKE cluster and, if successful, stores the manifest in another branch of the <strong>env repository</strong>.</p>
<p>We keep the app and env repositories separate because they have different lifecycles and uses. The main users of the <strong>app repository</strong> are actual humans and this repository is dedicated to a specific application. The main users of the <strong>env repository</strong> are automated systems (such as Cloud Build), and this repository might be shared by several applications. The <strong>env repository</strong> can have several branches that each map to a specific environment (you only use production in this lab) and reference a specific container image, whereas the <strong>app repository</strong> does not.</p>
<p>When you finish this lab, you have a system where you can easily:</p>
<ul>
<li>Distinguish between failed and successful deployments by looking at the Cloud Build history,</li>
<li>Access the manifest currently used by looking at the production branch of the <strong>env repository</strong>,</li>
<li>Rollback to any previous version by re-executing the corresponding Cloud Build build.</li>
</ul>
<p><img alt="gitops-tutorial-pipeline-flow.png" src="https://cdn.qwiklabs.com/qEN8Qxr82h1FkL8DhD5sqJmblM11i7JjhZv14OGahr0%3D"></p>
<aside class="special"><p><strong>Note:</strong></p>
<p>This lab uses Cloud Build to execute the pipelines, but there are other popular build automation tools that could serve as alternatives, such as Spinnaker and Jenkins.  At this time, some of these other tools have superior support for blue/green deployments, canary analysis, and similar features that may be required in more advanced CI/CD implementations.</p>
</aside>
<h2 id="step2">Objectives</h2>
<p>In this lab, you learn how to perform the following tasks:</p>
<ul>
<li>
<p>Create Kubernetes Engine clusters</p>
</li>
<li>
<p>Create Cloud Source Repositories</p>
</li>
<li>
<p>Trigger Cloud Build from Cloud Source Repositories</p>
</li>
<li>
<p>Automate tests and publish a deployable container image via Cloud Build</p>
</li>
<li>
<p>Manage resources deployed in a Kubernetes Engine cluster via Cloud Build</p>
</li>
</ul>
<h2 id="step3">Task 0. Lab Setup</h2>
<h3><strong>Access Qwiklabs</strong></h3>
<p>For each lab, you get a new GCP project and set of resources for a fixed time at no cost.</p>
<ol>
<li>
<p>Make sure you signed into Qwiklabs using an <strong>incognito window</strong>.</p>
</li>
<li>
<p>Note the lab's access time (for example, <img alt="img/time.png" src="https://cdn.qwiklabs.com/aZQJ4BT7uCmM9XR6BTXgTRP1Hfu1T7q6V%2BcnbdEsbpU%3D"> and make sure you can finish in that time block.</p>
</li>
</ol>
<aside> <p>
  There is no pause feature. You can restart if needed, but you have to start at the beginning.
  </p>

</aside>
<ol start="3">
<li>
<p>When ready, click <img alt="img/start_lab.png" src="https://cdn.qwiklabs.com/XE8x7uvQokyubNwnYKKc%2BvBBNrMlo5iNZiDDzQQ3Ddo%3D">.</p>
</li>
<li>
<p>Note your lab credentials. You will use them to sign in to Cloud Platform Console.
<img alt="img/open_google_console.png" src="https://cdn.qwiklabs.com/0d78dhX6IVMVWmixCPPSBbmi5O2GPokCXf1Ps1AkTgI%3D"></p>
</li>
<li>
<p>Click <strong>Open Google Console</strong>.</p>
</li>
<li>
<p>Click <strong>Use another account</strong> and copy/paste credentials for <strong>this</strong> lab into the prompts.</p>
</li>
</ol>
<aside class="warning"><p>
  If you use other credentials, you'll get errors or <strong>incur charges</strong>.
  </p>
</aside>
<ol start="7">
<li>Accept the terms and skip the recovery resource page.</li>
</ol>
<aside class="warning"><p>
  Do not click <strong>End Lab</strong> unless you are finished with the lab or want to restart it. This clears your work and removes the project.
  </p>
</aside>

<p>After you complete the initial sign-in steps, the project dashboard appears.</p>
<p><img alt="c679b27aa332f22d.png" src="https://cdn.qwiklabs.com/dxfeoOcn1ObyC0BYyoqqqSi4rO%2FeMdbWPFjoK6C0YYk%3D"></p>
<h3>Activate Google Cloud Shell</h3>
<p>Google Cloud Shell is a virtual machine that is loaded with development tools. It offers a persistent 5GB home directory and runs on the Google Cloud.
Google Cloud Shell provides command-line access to your GCP resources.</p>
<ol>
<li>
<p>In GCP console, on the top right toolbar, click the Open Cloud Shell button.</p>
<p><img alt="Cloud Shell icon" src="https://cdn.qwiklabs.com/vdY5e%2Fan9ZGXw5a%2FZMb1agpXhRGozsOadHURcR8thAQ%3D"></p>
</li>
<li>
<p>Click <strong>Continue</strong>.
<img alt="cloudshell_continue.png" src="https://cdn.qwiklabs.com/lr3PBRjWIrJ%2BMQnE8kCkOnRQQVgJnWSg4UWk16f0s%2FA%3D"></p>
</li>
</ol>
<p>It takes a few moments to provision and connect to the environment. When you are connected, you are already authenticated, and the project is set to your <em>PROJECT_ID</em>. For example:</p>
<p><img alt="Cloud Shell Terminal" src="https://cdn.qwiklabs.com/hmMK0W41Txk%2B20bQyuDP9g60vCdBajIS%2B52iI2f4bYk%3D"></p>
<p><strong>gcloud</strong> is the command-line tool for Google Cloud Platform. It comes pre-installed on Cloud Shell and supports tab-completion.</p>
<p>You can list the active account name with this command:</p>
<pre><code>gcloud auth list&#x000A;</code></pre>
<p>Output:</p>
<pre><code class="language-output prettyprint">Credentialed accounts:&#x000A; - &lt;myaccount&gt;@&lt;mydomain&gt;.com (active)&#x000A;</code></pre>
<p>Example output:</p>
<pre><code class="language-Output prettyprint">Credentialed accounts:&#x000A; - google1623327_student@qwiklabs.net&#x000A;</code></pre>
<p>You can list the project ID with this command:</p>
<pre><code>gcloud config list project&#x000A;</code></pre>
<p>Output:</p>
<pre><code class="language-output prettyprint">[core]&#x000A;project = &lt;project_ID&gt;&#x000A;</code></pre>
<p>Example output:</p>
<pre><code class="language-Output prettyprint">[core]&#x000A;project = qwiklabs-gcp-44776a13dea667a6&#x000A;</code></pre>
<ql-infobox>
  Full documentation of <strong>gcloud</strong> is available on
  <a href="https://cloud.google.com/sdk/gcloud" target="_blank">
    Google Cloud gcloud Overview
  </a>.
</ql-infobox>

<h2 id="step4">Task 1. Initialize Your Lab</h2>
<p>In this task you will prepare your Google Cloud Project for use by enabling the required APIs, initializing the git configuration in Cloud Shell, and downloading the sample code used later in the lab.</p>
<ol>
<li>
<p>In Cloud Shell, run the following command to enable the APIs for GKE, Cloud Build, Cloud Source Repositories and Container Analysis:</p>
</li>
</ol>
<pre><code>gcloud services enable container.googleapis.com \&#x000A;    cloudbuild.googleapis.com \&#x000A;    sourcerepo.googleapis.com \&#x000A;    containeranalysis.googleapis.com&#x000A;</code></pre>
<ol start="2">
<li>
<p>In Cloud Shell, create a GKE cluster that you will use to deploy the sample application of this lab.</p>
</li>
</ol>
<pre><code>gcloud container clusters create hello-cloudbuild \&#x000A;    --num-nodes 1 --zone us-central1-b&#x000A;</code></pre>
<ol start="3">
<li>
<p>If you have never used Git in Cloud Shell, configure it with your name and email address. Git will use those to identify you as the author of the commits you will create in Cloud Shell.</p>
</li>
</ol>
<pre><code>git config --global user.email "you@example.com"  &#x000A;git config --global user.name "Your Name"&#x000A;</code></pre>
<p>Click <em>Check my progress</em> to verify the objective.
<ql-activity-tracking step="1">
Initialize Your Lab
</ql-activity-tracking></p>
<h2 id="step5">Task 2. Create the Git repositories in Cloud Source Repositories</h2>
<p>In this task, you create the two Git repositories (<strong>hello-cloudbuild-app</strong> and <strong>hello-cloudbuild-env</strong>) used in this lab, and initialize <strong>hello-cloudbuild-app</strong> with some sample code.</p>
<ol>
<li>
<p>In Cloud Shell, create the two Git repositories.</p>
</li>
</ol>
<pre><code>gcloud source repos create hello-cloudbuild-app&#x000A;gcloud source repos create hello-cloudbuild-env&#x000A;</code></pre>
<ol start="2">
<li>
<p>Clone the sample code from GitHub.</p>
</li>
</ol>
<pre><code>cd ~&#x000A;git clone https://github.com/GoogleCloudPlatform/gke-gitops-tutorial-cloudbuild \&#x000A;    hello-cloudbuild-app&#x000A;</code></pre>
<ol start="3">
<li>
<p>Configure Cloud Source Repositories as a remote.</p>
</li>
</ol>
<pre><code>cd ~/hello-cloudbuild-app&#x000A;PROJECT_ID=$(gcloud config get-value project)&#x000A;git remote add google \&#x000A;    "https://source.developers.google.com/p/${PROJECT_ID}/r/hello-cloudbuild-app"&#x000A;</code></pre>
<p>The code you just cloned contains a simple "Hello World" application.</p>
<pre><code class="language-bash prettyprint">    from flask import Flask&#x000A;app = Flask('hello-cloudbuild')&#x000A;&#x000A;@app.route('/')&#x000A;def hello():&#x000A;  return "Hello World!\n"&#x000A;&#x000A;if __name__ == '__main__':&#x000A;  app.run(host = '0.0.0.0', port = 8080)&#x000A;</code></pre>
<p>Click <em>Check my progress</em> to verify the objective.
<ql-activity-tracking step="2">
Create the Git repositories in Cloud Source Repositories
</ql-activity-tracking></p>
<h2 id="step6">Task 3. Create a container image with Cloud Build</h2>
<p>The code you cloned already contains the following Dockerfile.</p>
<pre><code class="language-bash prettyprint">    FROM python:3.7-slim&#x000A;    RUN pip install flask&#x000A;    WORKDIR /app&#x000A;    COPY app.py /app/app.py&#x000A;    ENTRYPOINT ["python"]&#x000A;    CMD ["/app/app.py"]&#x000A;</code></pre>
<p>With this Dockerfile, you can create a container image with Cloud Build and store it in Container Registry.</p>
<ol>
<li>
<p>In Cloud Shell, create a Cloud Build build based on the latest commit with the following command.</p>
</li>
</ol>
<pre><code>cd ~/hello-cloudbuild-app&#x000A;COMMIT_ID="$(git rev-parse --short=7 HEAD)"&#x000A;gcloud builds submit --tag="gcr.io/${PROJECT_ID}/hello-cloudbuild:${COMMIT_ID}" .&#x000A;</code></pre>
<p>Cloud Build streams the logs generated by the creation of the container image to your terminal when you execute this command.</p>
<ol start="2">
<li>After the build finishes, in the Google Cloud Console <strong>Container Registry &gt; Images</strong>  to verify that your new container image is indeed available by in Container Registry.</li>
</ol>
<p><img alt="Container-Registry-1.png" src="https://cdn.qwiklabs.com/%2BtS8J6X%2Bt7lxwYc05MqfAp%2BnyWcPYsWxSckk1vFhLVk%3D"></p>
<p>Click <em>Check my progress</em> to verify the objective.
<ql-activity-tracking step="3">
Create a container image with Cloud Build
</ql-activity-tracking></p>
<h2 id="step7">Task 4. Create the Continuous Integration (CI) Pipeline</h2>
<p>In this task, you will configure Cloud Build to automatically run a small unit test, build the container image, and then push it to Container Registry. Pushing a new commit to Cloud Source Repositories triggers automatically this pipeline. The <strong>cloudbuild.yaml</strong> file already included in the code is the pipeline's configuration.</p>
<p><img alt="eb1db23e45516bec.png" src="https://cdn.qwiklabs.com/wl%2FyYfRFjCgSWunU0u%2B%2Bgyj3REeS0ccUKG%2FD9fgfl6A%3D"></p>
<ol>
<li>In the Google Cloud Console,  <strong>Cloud Build &gt; Triggers</strong>.</li>
<li>Click <strong>Create Trigger</strong>
</li>
<li>In the Name field, type <strong>hello-cloudbuild</strong>.</li>
<li>Under <strong>Event</strong>, select <strong>Push to a branch</strong>.</li>
<li>Under <strong>Source</strong>, select <strong>hello-cloudbuild-app</strong> as your <strong>Repository</strong> and <strong>^master$</strong> as your <strong>Branch</strong>.</li>
<li>Under <strong>Build configuration</strong>, select <strong>Cloud Build configuration file</strong>.</li>
<li>In the <strong>Cloud Build configuration file location</strong> field, type <strong>cloudbuild.yaml</strong> after the /.</li>
<li>Click <strong>Create</strong>
</li>
</ol>
<p><img alt="Cloud-Build-Trigger-1.png" src="https://cdn.qwiklabs.com/%2BiyOjkDlY4QPEh6G0vyinqor8t10gCqrm1w4xmTUdwU%3D"></p>
<p>When the trigger is created, return to the Cloud Shell. You now need to push the application code to Cloud Source Repositories to trigger the CI pipeline in Cloud Build.
To start this trigger, run the following command</p>
<pre><code>cd ~/hello-cloudbuild-app&#x000A;git push google master&#x000A;</code></pre>
<p>In the Google Cloud Console,  <strong>Cloud Build &gt; Dashboard</strong>.</p>
<p>You should see a build running or having recently finished. You can click on the build to follow its execution and examine its logs.</p>
<p><img alt="eb1db23e45516bec.png" src="https://cdn.qwiklabs.com/by89PSB7S5nlrhbdgOL1dY1JtsDYIGLHoM4KMwu97NQ%3D"></p>
<p>Click <em>Check my progress</em> to verify the objective.
<ql-activity-tracking step="4">
Create the Continuous Integration (CI) Pipeline
</ql-activity-tracking></p>
<h2 id="step8">Task 5. Create the Test Environment and CD Pipeline</h2>
<p>Cloud Build is also used for the continuous delivery pipeline. The pipeline runs each time a commit is pushed to the candidate branch of the __hello-cloudbuild-env__repository. The pipeline applies the new version of the manifest to the Kubernetes cluster and, if successful, copies the manifest over to the production branch. This process has the following properties:</p>
<ul>
<li>The candidate branch is a history of the deployment attempts.</li>
<li>The production branch is a history of the successful deployments.</li>
<li>You have a view of successful and failed deployments in Cloud Build.</li>
<li>You can rollback to any previous deployment by re-executing the corresponding build in Cloud Build. A rollback also updates the production branch to truthfully reflect the history of deployments.</li>
</ul>
<p>You will modify the continuous integration pipeline to update the candidate branch of the <strong>hello-cloudbuild-env</strong> repository, triggering the continuous delivery pipeline.</p>
<h3><strong>Grant Cloud Build access to GKE</strong></h3>
<p>To deploy the application in your Kubernetes cluster, Cloud Build needs the Kubernetes Engine Developer Identity and Access Management Role.</p>
<ol>
<li>
<p>In Cloud Shell execute the following command:</p>
</li>
</ol>
<pre><code>PROJECT_NUMBER="$(gcloud projects describe ${PROJECT_ID} --format='get(projectNumber)')"&#x000A;gcloud projects add-iam-policy-binding ${PROJECT_NUMBER} \&#x000A;    --member=serviceAccount:${PROJECT_NUMBER}@cloudbuild.gserviceaccount.com \&#x000A;    --role=roles/container.developer&#x000A;</code></pre>
<h3><strong>Initialize the hello-cloudbuild-env repository</strong></h3>
<p>You need to initialize the <strong>hello-cloudbuild-env</strong> repository with two branches (production and candidate) and a Cloud Build configuration file describing the deployment process.</p>
<p>The first step is to clone the <strong>hello-cloudbuild-env</strong> repository and create the production branch. It is still empty.</p>
<ol>
<li>
<p>In Cloud Shell execute the following command:</p>
</li>
</ol>
<pre><code>cd ~&#x000A;gcloud source repos clone hello-cloudbuild-env&#x000A;cd ~/hello-cloudbuild-env&#x000A;git checkout -b production&#x000A;</code></pre>
<ol start="2">
<li>
<p>Next you need to copy the <strong>cloudbuild-delivery.yaml</strong> file available in the <em>hello-cloudbuild-app</em> repository and commit the change.</p>
</li>
</ol>
<pre><code>cd ~/hello-cloudbuild-env&#x000A;cp ~/hello-cloudbuild-app/cloudbuild-delivery.yaml ~/hello-cloudbuild-env/cloudbuild.yaml&#x000A;git add .&#x000A;git commit -m "Create cloudbuild.yaml for deployment"  &#x000A;</code></pre>
<aside class="special"><p><strong>Note:</strong></p>
<p>The cloudbuild-delivery.yaml file describes the deployment process to be run in Cloud Build. It has two steps:
</p>
<ul>
<li>Cloud Build applies the manifest on the GKE cluster.</li>
<li>If successful, Cloud Build copies the manifest on the production branch.
</li>
</ul>
</aside>


<ol start="3">
<li>
<p>Create a candidate branch and push both branches for them to be available in Cloud Source Repositories.</p>
</li>
</ol>
<pre><code>git checkout -b candidate&#x000A;git push origin production&#x000A;git push origin candidate&#x000A;</code></pre>
<ol start="4">
<li>
<p>Grant the Source Repository Writer IAM role to the Cloud Build service account for the <strong>hello-cloudbuild-env</strong> repository.</p>
</li>
</ol>
<pre><code>PROJECT_NUMBER="$(gcloud projects describe ${PROJECT_ID} \&#x000A;    --format='get(projectNumber)')"&#x000A;cat &gt;/tmp/hello-cloudbuild-env-policy.yaml &lt;&lt;EOF&#x000A;bindings:&#x000A;- members:&#x000A;  - serviceAccount:${PROJECT_NUMBER}@cloudbuild.gserviceaccount.com&#x000A;  role: roles/source.writer&#x000A;EOF&#x000A;gcloud source repos set-iam-policy \&#x000A;    hello-cloudbuild-env /tmp/hello-cloudbuild-env-policy.yaml&#x000A;</code></pre>
<p>Click <em>Check my progress</em> to verify the objective.
<ql-activity-tracking step="5">
Grant Kubernetes Engine Developer and Source Repository Writer IAM role to cloud build
</ql-activity-tracking></p>
<h3><strong>Create the trigger for the continuous delivery pipeline</strong></h3>
<ol>
<li>In the Google Cloud Console,  <strong>Cloud Build &gt; Triggers</strong>.</li>
<li>Click <strong>Create Trigger</strong>
</li>
<li>In the Name field, type <strong>hello-cloudbuild-deploy</strong>.</li>
<li>Under <strong>Event</strong>, select <strong>Push to a branch</strong>.</li>
<li>Under <strong>Source</strong>, select <strong>hello-cloudbuild-env</strong> as your <strong>Repository</strong> and <strong>^candidate$</strong> as your <strong>Branch</strong>.</li>
<li>Under <strong>Build configuration</strong>, select <strong>Cloud Build configuration file</strong>.</li>
<li>In the <strong>Cloud Build configuration file location</strong> field, type <strong>cloudbuild.yaml</strong> after the /.</li>
<li>Click <strong>Create</strong>
</li>
</ol>
<p><img alt="Cloud-Build-Trigger-2.png" src="https://cdn.qwiklabs.com/FtksY3WtoDWYedUiEWBXkBZzAWggfF9AhwbI5i0EVZM%3D"></p>
<h3>Modify the continuous integration pipeline to trigger the continuous delivery pipeline</h3>
<p>In this section, you add some steps to the continuous integration pipeline that will generate a new version of the Kubernetes manifest and push it to the __hello-cloudbuild-env__repository to trigger the continuous delivery pipeline.</p>
<ol>
<li>
<p>Copy the extended version of the <strong>cloudbuild.yaml</strong> file for the <strong>app repository</strong>.</p>
</li>
</ol>
<pre><code>cd ~/hello-cloudbuild-app&#x000A;cp cloudbuild-trigger-cd.yaml cloudbuild.yaml&#x000A;</code></pre>
<p>The <strong>cloudbuild-trigger-cd.yaml</strong> is an extended version of the <strong>cloudbuild.yaml</strong> file. It adds the steps below: they generate the new Kubernetes manifest and trigger the continuous delivery pipeline.</p>
<aside class="special"><p><strong>Note:</strong></p>
<p>This pipeline uses a simple sed to render the manifest template. In reality, you will benefit from using a dedicated tool such as kustomize or skaffold. They allow for more control over the rendering of the manifest templates. </p>
</aside>
<ol start="2">
<li>
<p>Commit the modifications and push them to Cloud Source Repositories.</p>
</li>
</ol>
<pre><code>cd ~/hello-cloudbuild-app&#x000A;git add cloudbuild.yaml&#x000A;git commit -m "Trigger CD pipeline"&#x000A;git push google master&#x000A;</code></pre>
<p>This triggers the continuous integration pipeline in Cloud Build.</p>
<p>Click <em>Check my progress</em> to verify the objective.
<ql-activity-tracking step="6">
Create the trigger for the continuous delivery pipeline
</ql-activity-tracking></p>
<h2 id="step9">Task 6. Review Cloud Build Pipeline</h2>
<ol>
<li>In the Google Cloud Console,  <strong>Cloud Build &gt; Dashboard</strong>.</li>
<li>Click into <strong>hello-cloudbuild-app</strong> trigger to see to follow its execution and examine its logs. The last step of this pipeline pushes the new manifest to the <strong>hello-cloudbuild-env</strong> repository, which triggers the continuous delivery pipeline.</li>
</ol>
<p><img alt="Build-histroy-1.png" src="https://cdn.qwiklabs.com/fhfK%2F6Z72yUrC%2FyHACUJaNnoUMXwt5M9gJcm2BkTodc%3D"></p>
<ol>
<li>Return to the main <strong>Dashboard</strong>.</li>
<li>You should see a build running or having recently finished for the <strong>hello-cloudbuild-env</strong> repository. You can click on the build to follow its execution and examine its logs.</li>
</ol>
<p><img alt="Cloud-Build-dashboard-2.png" src="https://cdn.qwiklabs.com/qAeV%2FbgCks5dCOdBZ2J089Ms3DHBv1X3orVp%2F9yvWqk%3D"></p>
<h2 id="step10">Task 7. Test the complete pipeline</h2>
<p>The complete CI/CD pipeline is now configured. In this section, you test it from end to end.</p>
<ol>
<li>In the Google Cloud Console,  <strong>Kubernetes Engine &gt; Services &amp; Ingress</strong>.</li>
</ol>
<p>There should be a single service called <strong>hello-cloudbuild</strong> in the list. It has been created by the continuous delivery build that just ran.</p>
<ol start="2">
<li>Click on the endpoint for the <strong>hello-cloudbuild</strong> service. You should see "Hello World!". If there is no endpoint, or if you see a load balancer error, you may have to wait a few minutes for the load balancer to be completely initialized. Click Refresh to update the page if needed.</li>
</ol>
<p><img alt="App-1.png" src="https://cdn.qwiklabs.com/r4XfRZ7CZPMk4Dr8HJ3qHVAZIZDXD%2BwvqiPeA3b5efU%3D"></p>
<ol start="3">
<li>In Cloud Shell, replace "Hello World" by "Hello Cloud Build", both in the application and in the unit test.</li>
</ol>
<pre><code>cd ~/hello-cloudbuild-app&#x000A;sed -i 's/Hello World/Hello Cloud Build/g' app.py&#x000A;sed -i 's/Hello World/Hello Cloud Build/g' test_app.py&#x000A;</code></pre>
<ol start="4">
<li>Commit and push the change to Cloud Source Repositories.</li>
</ol>
<pre><code>git add app.py test_app.py&#x000A;git commit -m "Hello Cloud Build"&#x000A;git push google master&#x000A;</code></pre>
<ol start="6">
<li>This triggers the full CI/CD pipeline.</li>
</ol>
<p>After a few minutes, reload the application in your browser. You should now see "Hello Cloud Build!".</p>
<p><img alt="App-2.png" src="https://cdn.qwiklabs.com/g9DL0f%2BcVV7vEd6m%2F2pQ4EKV%2BESCBJgzdRRcgMM%2BSYI%3D"></p>
<p>Click <em>Check my progress</em> to verify the objective.
<ql-activity-tracking step="7">
Test the complete pipeline
</ql-activity-tracking></p>
<h2 id="step11">Task 8. Test the rollback</h2>
<p>In this task, you rollback to the version of the application that said "Hello World!".</p>
<ol>
<li>
<p>In the Google Cloud Console, <strong>Cloud Build &gt; Dashboard</strong>.</p>
</li>
<li>
<p>Click on <em>View all</em> link under <strong>Build History</strong> for the <strong>hello-cloudbuild-env</strong> repository.</p>
</li>
<li>
<p>Click on the second most recent build available.</p>
</li>
<li>
<p>Click Rebuild.</p>
</li>
</ol>
<p><img alt="rollback.png" src="https://cdn.qwiklabs.com/iLBtWEOJx%2FnmwISdKFM%2B3C2CbUmug8FtHJTBFLNpWuI%3D"></p>
<p>When the build is finished, reload the application in your browser. You should now see "Hello World!" again.</p>
<p><img alt="App-1.png" src="https://cdn.qwiklabs.com/r4XfRZ7CZPMk4Dr8HJ3qHVAZIZDXD%2BwvqiPeA3b5efU%3D"></p>
<p>Click <em>Check my progress</em> to verify the objective.
<ql-activity-tracking step="8">
Test the rollback
</ql-activity-tracking></p>
<h2 id="step12">End your lab</h2>
<p>When you have completed your lab, click <strong>End Lab</strong>. Qwiklabs removes the resources you’ve used and cleans the account for you.</p>
<p>You will be given an opportunity to rate the lab experience. Select the applicable number of stars, type a comment, and then click <strong>Submit</strong>.</p>
<p>The number of stars indicates the following:</p>
<ul>
<li>1 star = Very dissatisfied</li>
<li>2 stars = Dissatisfied</li>
<li>3 stars = Neutral</li>
<li>4 stars = Satisfied</li>
<li>5 stars = Very satisfied</li>
</ul>
<p>You can close the dialog box if you don't want to provide feedback.</p>
<p>For feedback, suggestions, or corrections, please use the <strong>Support</strong> tab.</p>

<p>Copyright 2021 Google LLC All rights reserved. Google and the Google logo are trademarks of Google LLC. All other company and product names may be trademarks of the respective companies with which they are associated.</p>



</div>
</div>


<div class='hidden js-end-lab-button-container lab-content__end-lab-button'>
<ql-lab-control-button class='js-end-lab-button' running></ql-lab-control-button>
</div>
<!-- / TODO: Move recommendations into the end lab modal -->
</ql-drawer-content>
<ql-drawer end id='outline-drawer' open slot='drawer' width='320'>
<div class='js-lab-content-outline lab-content__outline'>
<a href='#step1'>Overview</a><a href='#step2'>Objectives</a><a href='#step3'>Task 0. Lab Setup</a><a href='#step4'>Task 1. Initialize Your Lab</a><a href='#step5'>Task 2. Create the Git repositories in Cloud Source Repositories</a><a href='#step6'>Task 3. Create a container image with Cloud Build</a><a href='#step7'>Task 4. Create the Continuous Integration (CI) Pipeline</a><a href='#step8'>Task 5. Create the Test Environment and CD Pipeline</a><a href='#step9'>Task 6. Review Cloud Build Pipeline</a><a href='#step10'>Task 7. Test the complete pipeline</a><a href='#step11'>Task 8. Test the rollback</a><a href='#step12'>End your lab</a>
</div>
</ql-drawer>
</ql-drawer-container>
</ql-drawer-content>
</ql-drawer-container>
<div class='lab-introduction js-lab-introduction is-hidden'>
<div class='lab-introduction__inner'>
<h1 class='headline-1'>Welcome to Your First Lab!</h1>
<ql-icon-button class='js-skip-button'>close</ql-icon-button>
<div class='lab-introduction__video'>
<iframe allow='autoplay; encrypted-media' allowfullscreen frameborder='0' id='lab-introduction' src='https://www.youtube.com/embed/yF7EDXKTmoQ?enablejsapi=1&amp;rel=0&amp;showinfo=0'></iframe>
</div>
<a class='js-skip-button button button--outline'>Skip this video</a>
</div>
</div>



</div>
</main>


<div class='modal fade' id='lab-details-modal'>
<div class='modal-container'>
<div class='mdl-shadow--24dp modal-content'>
<div class='modal-body'>
<p class='l-mbm'>
In this lab, you will explore the concept of GitOps in the context of Continuous Integration/Continuous Deployment (CI/CD) pipelines implemented with Cloud Build for applications running on Google Kubernetes Engine. 

</p>
<p class='small-label l-mbs'>
<strong>
Duration:
</strong>
0m setup
&middot;
90m access
&middot;
60m completion
</p>
<p class='small-label l-mbs'>
<span><strong>Levels: </strong>intermediate</span>
</p>
<p class='small-label'>
<strong>
Permalink:
</strong>
<a href="https://googlecoursera.qwiklabs.com/catalog_lab/3104">https://googlecoursera.qwiklabs.com/catalog_lab/3104</a>
</p>
</div>
<div class='modal-actions'>
<a class='button button--text' data-dismiss='modal'>
Got It
</a>
</div>


</div>
</div>
<iframe class='l-ie-iframe-fix'></iframe>
</div>
<div class='modal fade' id='lab-review-modal'>
<div class='modal-container'>
<div class='mdl-shadow--24dp modal-content'>
<form class="simple_form js-lab-review-form" id="edit_lab_review_12005415" action="/lab_reviews/12005415" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="_method" value="patch" /><div class='modal-body'>
<p class='label'>
How satisfied are you with this lab?*
</p>
<div class='rateit js-rateit' data-rateit-max='5' data-rateit-min='0' data-rateit-resetable='false' data-rateit-step='1' data-rateit-value='5'></div>
<div class='l-mtm'>

<div class="control-group hidden lab_review_user_id"><div class="controls"><input class="hidden" type="hidden" value="3894861" name="lab_review[user_id]" id="lab_review_user_id" /></div></div>
<div class="control-group hidden lab_review_classroom_id"><div class="controls"><input class="hidden" type="hidden" name="lab_review[classroom_id]" id="lab_review_classroom_id" /></div></div>
<div class="control-group hidden lab_review_lab_id"><div class="controls"><input class="hidden" type="hidden" value="3104" name="lab_review[lab_id]" id="lab_review_lab_id" /></div></div>
<div class="control-group hidden lab_review_focus_id"><div class="controls"><input class="hidden" type="hidden" name="lab_review[focus_id]" id="lab_review_focus_id" /></div></div>
<div class="control-group hidden lab_review_rating"><div class="controls"><input class="hidden js-rating-input" type="hidden" value="2" name="lab_review[rating]" id="lab_review_rating" /></div></div>
<div class="control-group text optional lab_review_comment"><label class="text optional control-label" for="lab_review_comment">Comment</label><div class="controls"><textarea class="text optional" name="lab_review[comment]" id="lab_review_comment">
</textarea></div></div>
</div>
</div>
<div class='modal-actions'>
<a class='button button--text' data-dismiss='modal'>
Cancel
</a>
<input type="submit" name="commit" value="Submit" disabled="disabled" id="submit" data-disabled="false" class="button" data-disable-with="Submit" />
</div>
</form>

</div>
</div>
<iframe class='l-ie-iframe-fix'></iframe>
</div>


<script>
  $( function() {
    ql.initMaterialInputs();
    initChosen();
    initSearch();
    initTabs();
    ql.list.init();
    ql.favoriting.init();
    ql.header.myAccount.init();
    initTooltips();
    ql.autocomplete.init();
    ql.modals.init();
    ql.toggleButtons.init();
    ql.analytics.init();
    ql.labControlPanel.addRecaptchaErrorHandler();
  initLabContent();
  ql.labOutline.links.init();
  initLabReviewModal();
  ql.labAssessment.init();
  ql.labIntroduction.init( true );
  ql.labData.init();
  initLabTranslations( {"are_you_sure":"All done? If you end this lab, you will lose all your work. You may not be able to restart the lab if there is a quota limit. Are you sure you want to end this lab?\n","in_progress":"*In Progress*","ending":"*Ending*","starting":"*Starting, please wait*","end_concurrent_labs":"Sorry, you can only run one lab at a time. To start this lab, please confirm that you want all of your existing labs to end.\n","copied":"Copied","no_resource":"Error retrieving resource.","no_support":"No Support","mac_press":"Press ⌘-C to copy","thanks_review":"Thanks for reviewing this lab.","windows_press":"Press Ctrl-C to copy","days":"days"} );
  ql.labRun.init();
  ql.chat.init();
  ql.initHeader();
  ql.navigation.init();
  ql.navPanel.init();
  ql.navigation.init();
  
  });
</script>

</body>
</html>

